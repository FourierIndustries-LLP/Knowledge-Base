<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>FourierIndustries Knowledge Base</title>
    <link href="https://knowledge.fourier.industries/feed.xml" rel="self" />
    <link href="https://knowledge.fourier.industries" />
    <updated>2022-04-16T23:22:19+08:00</updated>
    <author>
        <name>FourierIndustries LLP</name>
    </author>
    <id>https://knowledge.fourier.industries</id>

    <entry>
        <title>Capstone Project</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/mobile-apps-part-3.html"/>
        <id>https://knowledge.fourier.industries/mobile-apps-part-3.html</id>

        <updated>2022-04-10T22:51:51+08:00</updated>
            <summary>
                <![CDATA[
                    In the recent Singapore Budget Debate of 2022, a total&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In the recent Singapore Budget Debate of 2022, a total of <a href="https://www.straitstimes.com/singapore/politics/budget-debate-mnd-to-fund-technologies-to-green-buildings-sustainability-solutions" target="_blank" rel="noopener noreferrer">$64 million was invested under the Cities of Tomorrow programme</a> to spur the innovative use of energy-efficient technologies.¬†</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/meric-dagli-Uii70ORiFPE-unsplash.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/meric-dagli-Uii70ORiFPE-unsplash-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/meric-dagli-Uii70ORiFPE-unsplash-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/meric-dagli-Uii70ORiFPE-unsplash-md.jpg 749w"  alt="" width="510" height="287"></figure>
<p>¬†</p>
<figure class="post__image post__image--left"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/solarnova-03.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/solarnova-03-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/solarnova-03-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/solarnova-03-md.jpg 749w"  alt="" width="379" height="285"></figure>HDB housing blocks are <a href="https://www.straitstimes.com/politics/parliament-10-year-plan-to-make-hdb-towns-more-liveable-and-sustainable" target="_blank" rel="noopener noreferrer">adopting reflective paint and smart lighting</a> to reduce energy consumption in our housing estates, and <a href="https://www.straitstimes.com/singapore/politics/budget-debate-30m-grant-for-building-owners-to-adopt-technologies-for-facilities-management" target="_blank" rel="noopener noreferrer">$30 million in grants were allocated for building owners </a>to build or renovate buildings with smarter infrastructure with sensors to monitor the building and increase energy efficiency.</p>
<p>With the recent instability in fuel prices, many Singaporean Food and Beverage (F&amp;B) outlets had to pass on the <a href="https://www.todayonline.com/singapore/electricity-prices-inflation-coffee-shops-1842886" target="_blank" rel="noopener noreferrer">increase in electricity bills</a> to their customers buying their food.¬†</p>
<h2>Objectives</h2>
<p>A Kopitiam owner in Singapore wishes to save on energy costs by turning off the fans when the Kopitiam is cool enough or when there‚Äôs nobody at the Kopitiam. In addition, he also wishes to be able to remotely control the lights so that the lights turn on and off automatically through an IoT automation. For our final project, you have been tasked to design and build a prototype of an Internet of Things hub for a Smart Kopitiam. Let‚Äôs get started!</p>
<p>Our device will need to do two things:</p>
<ul>
<li style="font-weight: 400;" aria-level="1">Sense the temperature and human presence to determine if the fans in the Kopitiam need to be turned on. The fans are connected to another IoT device and are not connected to this hub physically, so we only need to send temperature and presence data.</li>
<li style="font-weight: 400;" aria-level="1">Receive commands from the Internet to turn lights on and off. The lights are connected to this hub physically so we will need to toggle a pin on and off to demonstrate this.</li>
</ul>
<p>Given the objectives, we will need 2 sensors (input) and 1 actuator (output). The TMP36 temperature sensor and the Passive Infrared (PIR) sensor will be used to detect temperature and human movement respectively.</p>
<h2>Ubidots Setup</h2>
<p>In our previous examples, we have already set up two Variables in Ubidots: Temperature and Light. We just need to add one more variable to represent human movement, called ‚ÄúMotion‚Äù.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-1.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-1-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-1-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-1-md.png 749w"  alt="" width="2132" height="1448"></figure>
<p>After this, let‚Äôs create a new Dashboard called ‚ÄúSmart Kopitiam‚Äù so that you can have an overview of all the controls and values. (Don‚Äôt forget to set the default time range to Last 1 Hour so it‚Äôs easy to see your data coming in!)</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-2-md.png 749w"  alt="" width="2116" height="1444"></figure>
<p>We now need to populate the dashboard with components to show controls for all 3 of the Variables: Temperature, Motion and Light.</p>
<p>Add 3 widgets and link them to the Variables mentioned above: <strong>Thermometer</strong> (to show temperature), <strong>Indicator</strong> (to show human movement), and <strong>Switch</strong> (to control the light).</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-3.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-3-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-3-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-3-md.png 749w"  alt="" width="2130" height="710"></figure>
<h2>Hooking up your SSTuino</h2>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<p>Let‚Äôs start to connect your SSTuino with the sensors we need for this project.¬†</p>
<ul>
<li>PIR sensor: Pin 6</li>
<li>LED: Pin 2</li>
<li>TMP36 temperature sensor: Pin A0</li>
</ul>
<p>You may start connecting your device like the diagram below:¬†</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-4.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-4-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-4-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-4-md.png 749w"  alt="" width="1494" height="1096"></figure>
<h2>Programming the SSTuino</h2>
<p>With the circuit connections done, it‚Äôs time to start programming your SSTuino to send and receive data from Ubidots. For this section, you will need to tweak the previous example code you have already built for sending data in both ways. Try it out!</p>
<h3>Hints</h3>
<ul>
<li>The previous code you made has 1 Variable sending and 1 Variable receiving. In this project, you need to send 2 Variables, and receive 1 Variable.¬†</li>
<li>Use what you have learnt in <a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html">From Blocks to Code Part II</a>, how would you avoid using the <code>delay()</code> function and use <code>millis()</code> instead?</li>
</ul>
<p>By the end, you should see something like this appearing on your Smart Kopitiam dashboard, and you should also be able to control the light using the Switch widget on the dashboard.</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-5.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-5-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-5-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-5-md.png 749w"  alt="" width="2130" height="702"></figure>
<h2>Making an app to control it üòÑ</h2>
<p>Once you are satisfied with your program, it‚Äôs time to make an app to control it!¬†</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-6.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-6-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-6-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-6-md.png 749w"  alt="" width="313" height="488"></figure>
<p>We have provided an app template with the basic functions to connect to Ubidots and the general layout of the app:</p>
<p class="align-center"><a href="https://x.thunkable.com/copy/d75c2d13ec8bbda6550356833a196b24" target="_blank" rel="noopener noreferrer" class="btn">Smart Kopitiam App Template</a></p>
<p>You will need to link up the rest of the code yourself. We have placed the 3 important controls on the app, named:</p>
<ul>
<li><strong>Switch_Light</strong> - Light switch</li>
<li><strong>Label_Motion</strong> - Text label indicating motion</li>
<li><strong>Label_Temp</strong> - Text label indicating temperature</li>
</ul>
<p class="msg msg--info"><strong>Hint</strong>: If you want to fetch a Variable automatically from Ubidots and display it on a label, you can use something like the code below:<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/31/Thunkable-9-CapstoneSetup-7.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-7-xs.png 300w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-7-sm.png 480w ,https://knowledge.fourier.industries/media/posts/31/responsive/Thunkable-9-CapstoneSetup-7-md.png 749w"  alt="" width="436" height="282"></figure>
<h2>Conclusion</h2>
<p>If you have completed your Capstone project with a fully working mobile app, circuit and program, congratulations! You have completed the SSTuino II Essentials Track.¬†</p>
<p>If you feel like you are up for a challenge, or just wish to learn more about how to build different solutions with your SSTuino II, we have something in store for you! Our team is currently working on the Advanced Tracks, which will give in-depth tutorials on using the SSTuino II in scientific inquiry, or building advanced mobile apps with Swift Playgrounds. Stay tuned üòä</p>
<p><a href="https://knowledge.fourier.industries/mobile-apps-part-2.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Mobile Apps, Part II</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/mobile-apps-part-2.html"/>
        <id>https://knowledge.fourier.industries/mobile-apps-part-2.html</id>

        <updated>2022-04-16T23:22:19+08:00</updated>
            <summary>
                <![CDATA[
                    In our previous tutorial, we have gone through all of&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In our previous tutorial, we have gone through all of the basics of making a Thunkable app. Now, we are going to actually create an app that links to Ubidots. Don't worry, we have made a whole bunch of functions that make it much easier to integrate.¬†</p>
<p>Click on the button below to clone the template.</p>
<p class="align-center"><a href="https://x.thunkable.com/copy/bfc99f8dc5f002c3ee19889b6e1227a0" target="_blank" rel="noopener noreferrer" class="btn">Clone the Thunkable IoT App Template</a></p>
<h2>Trying out the basics</h2>
<p>The template app is built similarly to the app you made in Part 1 of this tutorial, with a Home and Settings page. Let‚Äôs try out this app! Click the Play button (Web Preview).</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-7-Basics-1E-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-1E-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-1E-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-1E-2-md.png 749w"  alt="" width="2130" height="206"></figure>
<p>We need to copy the credentials from Ubidots to our app. Click the Settings tab to go to the settings of the app first.¬†</p>
<p>Go to your SSTuino II device and copy the Token and API Label to your app as shown below:</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-7-Basics-2E.png" data-size="942x1404"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-7-Basics-2E-thumbnail.png" alt="" width="749" height="1116"></a>
<figcaption>Transfer the text from here...</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-7-Basics-3E.png" data-size="798x1380"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-7-Basics-3E-thumbnail.png" alt="" width="749" height="1295"></a>
<figcaption>...to here!</figcaption>
</figure>
</div></div>
<p>Don't forget to press Save!</p>
<h3>Retrieving Variables from Ubidots</h3>
<p>Time to go back to the Home screen and try getting a Variable from Ubidots! You just need to type the name of your Ubidots Variable (like ‚Äútemperature‚Äù or ‚Äúlight‚Äù) into the ‚ÄúVariable Label‚Äù text box and press ‚ÄúGet Variable‚Äù.</p>
<p>If everything goes right, Ubidots should respond with the last value that was received:</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-7-Basics-4.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-4-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-4-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-4-md.png 749w"  alt="" width="350" height="286"></figure>
<pre>Insert video of the temperature changing on the dashboard</pre>
<p>If you didn‚Äôt see the above, you might want to double-check some of your settings with the Common Issues list below:</p>
<table style="border-collapse: collapse; width: 100%;" border="1">
<tbody>
<tr>
<td style="width: 45.2252%;"><strong>Error</strong></td>
<td style="width: 54.7748%;"><strong>Solution</strong></td>
</tr>
<tr>
<td style="width: 45.2252%;">The server responds with <code>{"code": 404001, "message":"The request was not found."}</code></td>
<td style="width: 54.7748%;">You might have entered one of the following things wrongly: the Variable Label on the Home screen, or the Device Label on the Settings screen.</td>
</tr>
<tr>
<td style="width: 45.2252%;">The server responds with <code>{"code": 401002, "message": "Incorrect authentication credentials."}</code></td>
<td style="width: 54.7748%;">You have entered an incorrect Authentication Token on the Settings screen</td>
</tr>
<tr>
<td style="width: 45.2252%;">The response is empty (e.g. it just shows <code>Response: </code>)</td>
<td style="width: 54.7748%;">Double-check your Variable in Ubidots, was any data ever created on that Variable channel? This happens when there are no pre-existing data for that Variable.</td>
</tr>
</tbody>
</table>
<h3>Sending Variables to Ubidots</h3>
<p>To send data to a Ubidots Variable, we need to also fill in the ‚ÄúVariable Content‚Äù field below on what we want to send to Ubidots. In our example, we can send a temperature value of 28.9 to Ubidots by pressing the ‚ÄúPush Variable‚Äù button to send this value to the Variable in Ubidots.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-7-Basics-5.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-5-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-5-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-7-Basics-5-md.png 749w"  alt="" width="276" height="474"></figure>
<p>If all goes well, you should see the message above telling you that the value has been recorded. If not, check out some of the Common Issues listed below:</p>
<table style="border-collapse: collapse; width: 100%;" border="1">
<tbody>
<tr>
<td style="width: 62.7494%;"><strong>Error</strong></td>
<td style="width: 37.3933%;"><strong>Solution</strong></td>
</tr>
<tr>
<td style="width: 62.7494%;">The server tells me I don‚Äôt have permissions to create a new variable: Error: <code>{"error": {"message": "The user has not permissions to create a new variable.","code":403001}}</code></td>
<td style="width: 37.3933%;">You might have keyed in the wrong Device Label in the Settings screen</td>
</tr>
<tr>
<td style="width: 62.7494%;">The server responds with <code>{"code": 401002, "message": "Incorrect authentication credentials."}</code></td>
<td style="width: 37.3933%;">You have entered an incorrect Authentication Token on the Settings screen</td>
</tr>
<tr>
<td style="width: 62.7494%;">The server responds with <code>{"error": {"message": "The value NaN is not in a valid range.‚Äù,"code":4000013331}}</code> or <code>{"code":400001," message": "The payload sent is not a valid json document."}</code></td>
<td style="width: 37.3933%;">Looks like you entered some text in the Variable Content field! Remember that Ubidots only accepts numbers.</td>
</tr>
</tbody>
</table>
<h2>Understanding the code</h2>
<p>We can now start to look at the code in Thunkable piece by piece to understand what it does, and how it works.¬†There are a few sections of the block codes to understand:</p>
<ol>
<li>Stored Variables</li>
<li>Button Click</li>
<li>What's an Object?</li>
<li>Getting Data from Ubidots</li>
<li>Sending Data to Ubidots</li>
</ol>
<h3>Stored Variables</h3>
<p>Stored Variables are very much like the App Variables we previously used, but they will persist even after you close and reopen the app. App Variables, on the other hand, get reset after the app is closed.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-1.png" data-size="840x148"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-1-thumbnail.png" alt="" width="749" height="132"></a>
<figcaption>Declaring a stored variable</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-2.png" data-size="540x148"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-2-thumbnail.png" alt="" width="540" height="148"></a>
<figcaption>Getting a stored variable</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-3.png" data-size="958x88"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-3-thumbnail.png" alt="" width="749" height="69"></a>
<figcaption>Setting the value of a stored variable</figcaption>
</figure>
</div></div>
<h3>Button Click</h3>
<p>This part is almost entirely similar to what you did in the previous exercise in Part 1.¬†</p>
<p>Firstly, the app needs to detect the button click from the two buttons to either retrieve or send a data point. (See <strong>"Detect Button Press"</strong> in the diagram)</p>
<p>After that, it sets a variable to be equal to the result of the request from Ubidots. At this point, your app will connect to Ubidots and ask for the information. (<strong>"Get Variable from Ubidots"</strong> in the diagram)</p>
<p>Once the information has been downloaded, it is stored in an object which has two properties: ‚Äúerror‚Äù and ‚Äútext‚Äù. The property ‚Äúerror‚Äù is a boolean (true/false value) that indicates whether an issue has happened with the connection and ‚Äútext‚Äù is a string (alphanumeric text) that contains the response of the server (if no error occurred) or the error message (if an error occurred).</p>
<p>Our program here checks whether ‚Äúerror‚Äù is true, and shows the message with the words ‚ÄúError:‚Äù in front of it. If not, the words ‚ÄúResponse:‚Äù will be added in front of the incoming message and displayed on a label. (See <strong>"Check if error occurred"</strong> and <strong>"Output text onto screen"</strong> in the diagram)</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-8-Understanding-4E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-4E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-4E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-4E-md.png 749w"  alt="" width="1984" height="732"></figure>
<h3>What‚Äôs an Object?</h3>
<p>At this point, you might be asking, what is an Object? An Object in Thunkable is a special kind of variable that can store many other variables inside it and you can retrieve the variables inside through names. The ‚Äúnames‚Äù that are used to retrieve variables are called ‚Äúproperties‚Äù.¬†</p>
<p>For example, if I create an Object called ‚Äúperson‚Äù to represent a person, I would want it to have several properties like:</p>
<ul>
<li>Name</li>
<li>Birthday</li>
<li>Gender</li>
</ul>
<p>..and the same applies for Thunkable! You can set and retrieve properties of an object using the ‚Äúget property of object‚Äù function, and you can construct objects with the ‚Äúcreate objects with fields‚Äù function.</p>
<div class="gallery-wrapper gallery-wrapper--full"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-5.png" data-size="1278x168"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-5-thumbnail.png" alt="" width="749" height="98"></a>
<figcaption>Retrieving info from an object</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-6.png" data-size="582x282"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/30/gallery/Thunkable-8-Understanding-6-thumbnail.png" alt="" width="582" height="282"></a>
<figcaption>Creating an object</figcaption>
</figure>
</div></div>
<p><span style="font-weight: 400;">In this app, we use Objects to contain multiple variables (‚Äúerror‚Äù and ‚Äútext‚Äù) within one variable so that a function can output it (Remember that functions cannot output multiple variables).</span></p>
<h2>Getting Data from Ubidots</h2>
<p>This template makes use of custom functions to connect to Ubidots. Let‚Äôs start with getting data from Ubidots with the ‚Äúget Ubidots variable‚Äù function.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-8-Understanding-7.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-7-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-7-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-7-md.png 749w"  alt="" width="543" height="89"></figure>
<p>For this function, there is only 1 input on the right side: the variable name. On the left side, the function outputs an Object with ‚Äúerror‚Äù (true/false, to indicate if an error happened) and ‚Äútext‚Äù (the response from the server).</p>
<h2>Sending Data to Ubidots</h2>
<p>To send the data you want to Ubidots, you will need to use the ‚Äúset Ubidots variable‚Äù function.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/30/Thunkable-8-Understanding-8.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-8-xs.png 300w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-8-sm.png 480w ,https://knowledge.fourier.industries/media/posts/30/responsive/Thunkable-8-Understanding-8-md.png 749w"  alt="" width="518" height="118"></figure>
<p>This function takes 2 inputs on the right side: variable name and variable content. Variable content must be a number as Ubidots only allows numbers. The function outputs the same Object as the ‚Äúget Ubidots variable‚Äù function. If you wish to check if your data has been sent, you just have to simply check if the ‚Äúerror‚Äù parameter is false.</p>
<h2>Conclusion</h2>
<p>Over the past 2 tutorials, you have learnt the basics of building a mobile application using Thunkable and linking it to IoT services like Ubidots. In our next tutorial, you will be building a full IoT solution to increase energy efficiency in our heartland: kopitiams!</p>
<p><a href="https://knowledge.fourier.industries/mobile-apps-part-1.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/mobile-apps-part-3.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Transmit and Receive</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/transmit-and-receive.html"/>
        <id>https://knowledge.fourier.industries/transmit-and-receive.html</id>

        <updated>2022-04-16T23:19:17+08:00</updated>
            <summary>
                <![CDATA[
                    In this lesson, we will be learning how to send&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In this lesson, we will be learning how to send and receive data to and from Ubidots. Let‚Äôs go!</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1g04lk9pg2bn">"Publishing" Data to Ubidots MQTT</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2bo">Arduino Hookup</a></li>
<li><a href="#mcetoc_1g04lk9pg2bp">Transplanting Code</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2bq">Step 1: Declaration</a></li>
<li><a href="#mcetoc_1g04lk9pg2br">Step 2: Setup</a></li>
<li><a href="#mcetoc_1g04lk9pg2bs">Step 3: Loop</a></li>
<li><a href="#mcetoc_1g04lk9pg2bt">Step 4: Publish</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mcetoc_1g04lk9pg2bu">"Subscribing" data from Ubidots MQTT</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2bv">Ubidots Setup</a></li>
<li><a href="#mcetoc_1g04lk9pg2c0">Code</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2c1">Step 1: Declaration</a></li>
<li><a href="#mcetoc_1g04lk9pg2c2">Step 2:¬† Setup</a></li>
<li><a href="#mcetoc_1g04lk9pg2c3">Step 3: Loop</a></li>
<li><a href="#mcetoc_1g04lk9pg2c4">Step 4: Message Received</a></li>
<li><a href="#mcetoc_1g04lk9pg2c5">Step 5: Subscribe</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mcetoc_1g04lk9pg2c6">Both at the same time!</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2c7">Arduino Hookup</a></li>
<li><a href="#mcetoc_1g04lk9pg2c8">Code</a>
<ul>
<li><a href="#mcetoc_1g04lk9pg2c9">Step 1: Declarations</a></li>
<li><a href="#mcetoc_1g04lk9pg2ca">Step 2: Setup</a></li>
<li><a href="#mcetoc_1g04lk9pg2cb">Step 3: Loop</a></li>
<li><a href="#mcetoc_1g04lk9pg2cc">Step 4: Message Received</a></li>
<li><a href="#mcetoc_1g04lk9pg2cd">Step 5: Connect</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#mcetoc_1g068rr6ph">In the next lesson...</a></li>
</ul>
</div>
<h2 id="mcetoc_1g04lk9pg2bn">"Publishing" Data to Ubidots MQTT</h2>
<p>Let us send (‚Äúpublish‚Äù) some data to Ubidots! We will be sending the ambient temperature to Ubidots with our TMP36 temperature sensor.</p>
<p>Open the previous Arduino code where we went through all the Wi-Fi passwords and Ubidots tokens (you should have saved it as ‚ÄúConnect‚Äù), and save it as a new project (name it something like ‚ÄúPublish‚Äù).</p>
<h3 id="mcetoc_1g04lk9pg2bo">Arduino Hookup</h3>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/27/arduinoPot40.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-xs.png 300w ,https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-sm.png 480w ,https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-md.png 749w"  alt="" width="1837" height="854"></figure>
<p>You will need to connect your SSTuino according to the diagram above, with the TMP36 sensor's output connected to Analog In A0.</p>
<h3 id="mcetoc_1g04lk9pg2bp">Transplanting Code</h3>
<p>Now, let‚Äôs look at the TMP36 code that we built previously in TinkerCAD. It should look something like this:</p>
<pre><code class="language-cpp">// C++ code
//
int temp = 0;

void setup()
{
  pinMode(A0, INPUT);
  Serial.begin(9600);
}

void loop()
{
  temp = (-40 + 0.488155 * (analogRead(A0) - 20) + 0);
  Serial.println(temp);
  delay(10); // Delay a little bit to improve simulation performance
}</code></pre>
<p>Based on what we have learned in <a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-5.html">From Blocks To Code - Part I</a>, we will be transplanting the 3 important sections of this code to the IoT template that we are using to connect: <strong>Declaration</strong>, <strong>Setup</strong> and <strong>Loop</strong>. Transplanting code is easy because the example has already marked out where to put your code üòÑ. Find the parts marked by <code>/********* This is where you put your own code *********/</code>.</p>
<h4 id="mcetoc_1g04lk9pg2bq">Step 1: Declaration</h4>
<p>The first part to transplant would be the variable <code>temp</code> for temperature so that we have this variable in our IoT code.</p>
<pre><code class="language-cpp">‚Ä¶
WiFiClient network;
MQTTClient client;

/********* This is where you put your own code *********/

// Variables
int temp = 0;

/**************** End of your own code *****************/

void setup()
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2br">Step 2: Setup</h4>
<p><span style="font-weight: 400;">The second part would be our <code>setup()</code> function, to set Analog Pin A0 as an input. We can ignore the <code>Serial.begin</code> safely as we already set up our Serial connection in the example, so we only need to copy over <code>pinMode()</code>.</span></p>
<pre><code class="language-cpp">‚Ä¶
void setup()<br>{
  Serial.begin(9600);

  /********* This is where you put your own code *********/

  pinMode(A0, INPUT);

  /**************** End of your own code *****************/

  connectToWiFi(SECRET_SSID, SECRET_PASS); // Connect to the WiFi network

  // Setup the MQTT client, but not connecting yet
  client.begin(MQTT_URL, MQTT_PORT, network);
  client.onMessage(messageReceived);

  connect(client, &amp;subscribe); // Connect to MQTT server
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2bs">Step 3: Loop</h4>
<p>The third part is the <code>loop()</code> function, to calculate the temperature from the voltage. We only need to transplant the 1st line to our IoT example code, underneath <code>This is where you put your own code</code>, since we only need to calculate the temperature.</p>
<p>As for the delay, we will increase it to 10 seconds (10000 milliseconds) to prevent it from spamming the server.</p>
<pre><code class="language-cpp">‚Ä¶
void loop()
{
  bool connected = client.loop(); // This function must be called on every loop

  // Check if MQTT connection is active, and reconnect if it's broken
  if (connected == false)
  {
    Serial.println("MQTT Client disconnected, reconnecting...");
    connect(client, &amp;subscribe);
  }

  /********* This is where you put your own code *********/

  // Read the temperature
  temp = -40 + 0.488155 * (analogRead(A0) - 20);
  
  delay(10000);

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<p>Great, now we are done with our transplanting and we are ready to write our first IoT code!</p>
<p>If you check out the file tab named <strong>‚Äòhelper.h‚Äô</strong>¬†on the tab bar, you will find that we have written a lot of functions to make your life easier. Here‚Äôs a rundown of all the functions that you can use throughout your IoT programs:</p>
<ul>
<li><code>connectToWiFi(SSID, password)</code>: Connects to Wi-Fi, and automatically reconnects if the Wi-Fi disconnects</li>
<li><code>publishUbidots(client, topic, message)</code>: Publishes an MQTT message on a topic</li>
<li><code>subscribeUbidots(client, topic)</code>: Subscribes to an MQTT topic. You should only use this function at the last part of the <code>connect()</code>¬†function</li>
<li><code>topicMatches(longTopic, shortTopic)</code>: Checks if your topic matches the topic sent by Ubidots</li>
<li><code>connect(client, subscribe)</code>: Connects to MQTT and automatically subscribes to topics designated in the <code>subscribe()</code> function</li>
</ul>
<p>Since MQTT only allows us to publish the data in the form of Strings, we need to convert our temperature number into a String. Make a new String variable called <code>temperatureString</code> with <code>temp</code> (recall lesson <a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-5.html">From Blocks to Code - Part I</a>).</p>
<pre><code class="language-cpp">
  ‚Ä¶
  temp = -40 + 0.488155 * (analogRead(A0) - 20);
    
  // Convert the temperature to a String
  String temperatureString = String(temp);
  
  delay(10000); // repeat every 10 seconds
  ‚Ä¶
</code></pre>
<h4 id="mcetoc_1g04lk9pg2bt">Step 4: Publish</h4>
<p>Recall that in the last lesson, we went through what MQTT is and what MQTT topics look like. Let‚Äôs say you have followed all instructions and named your device ‚ÄúSSTuino II‚Äù. Now the name for this device in the topic should be <code>sstuino-ii</code>. Combine this with the name of the Variable you added on Ubidots earlier and you get <code>sstuino-ii/temperature</code>.</p>
<p>Publishing to Ubidots using MQTT is as simple as calling the <code>publishUbidots()</code> function like so: <code>publishUbidots(client, ‚Äússtuino-ii/temperature‚Äù, temperatureString);</code>. Make sure you place all of this code <i>before</i> the delay so that all of it runs before the microcontroller sleeps for 10 seconds.</p>
<p>The code between the <code>/****/</code> in <code>loop()</code>¬†should look something like this:</p>
<pre><code class="language-cpp">‚Ä¶
void loop()<br>{
  ‚Ä¶

  /********* This is where you put your own code *********/

  // Read the temperature
  temp = -40 + 0.488155 * (analogRead(A0) - 20);
    
  // Convert the temperature to a String
  String temperatureString = String(temp);
  publishUbidots(client, "sstuino-ii/temperature", temperatureString);
  delay(10000); // repeat every 10 seconds

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<p>Before you upload your program, don't forget to double-check the 'arduino_secrets.h' file to ensure that you have the correct Wi-Fi password and Ubidots account details.</p>
<pre>Insert video here of using your finger to manually raise the temperature of the TMP36</pre>
<p>Connect your SSTuino, upload your program, open your Serial Monitor and go to your Ubidots dashboard. You can now see the current temperature on the dashboard!¬†</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/27/Ubidots-5-Dashboard-7E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-5-Dashboard-7E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-5-Dashboard-7E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-5-Dashboard-7E-md.png 749w"  alt="" width="564" height="390"></figure>
<p>Well done, now you have made your first Internet-connected temperature sensor in 4 steps (Declaration, Setup, Loop, Publish). This simple example can be extended to many other sensors that you may want to build, like motion detectors, air quality sensors, and so on.</p>
<h2 id="mcetoc_1g04lk9pg2bu">"Subscribing" data from Ubidots MQTT</h2>
<p>Now that we have sent, or ‚Äúpublished‚Äù data to Ubidots, let‚Äôs try receiving data by ‚Äúsubscribing‚Äù!¬†</p>
<p>We will be making a very simple example: a smart light switch. Arduino represents a HIGH signal with the number 1, and a LOW signal with the number 0, which means that we can simply represent the state of the light switch as 0s and 1s. Our light switch will use one of the debug lights on the board, meaning that you do not need to connect anything externally for it to work.</p>
<h3 id="mcetoc_1g04lk9pg2bv">Ubidots Setup</h3>
<p>Get started by creating a new Variable under your existing Device with the name ‚ÄúLight‚Äù as shown:</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/27/Ubidots-6-Subscribe-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-6-Subscribe-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-6-Subscribe-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/27/responsive/Ubidots-6-Subscribe-1E-md.png 749w"  alt="" width="662" height="452"></figure>
<p>Next, let‚Äôs create a switch on our dashboard so that we can control this light switch. Press the + button on top and create a new switch, then link it to the ‚ÄúLight‚Äù Variable of your device.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-2.png" data-size="2134x1474"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-2-thumbnail.png" alt="" width="749" height="517"></a>
<figcaption>Select 'Switch' to add to your dashboard</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-3.png" data-size="2136x1478"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-3-thumbnail.png" alt="" width="749" height="518"></a>
<figcaption>Add the Variable called "light"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-4.png" data-size="1208x838"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/27/gallery/Ubidots-6-Subscribe-4-thumbnail.png" alt="" width="749" height="520"></a>
<figcaption>Done!</figcaption>
</figure>
</div></div>
<p>We are now done with Ubidots.</p>
<h3 id="mcetoc_1g04lk9pg2c0">Code</h3>
<p>We can open the code that we used to connect to MQTT previously (should be named Connect) and save it as a new project (name it something like ‚ÄúSubscribe‚Äù). You can also open the Publish code you just built as a side-by-side reference if you need to.</p>
<p>We can now start building our code for subscribing with 5 major steps: <strong>Declaration</strong>, <strong>Setup</strong>, <strong>Loop</strong>, <strong>Message Received</strong> and <strong>Subscribe</strong>. Compared to the previous Publish example, it has 1 extra and 1 changed step.</p>
<h4 id="mcetoc_1g04lk9pg2c1">Step 1: Declaration</h4>
<p>You will first need to store the state of the light, in other words, whether it is on or off (in Arduino terms, <code>HIGH</code> or <code>LOW</code>). Make an integer variable called <code>light</code> and set it to <code>LOW</code> initially.</p>
<pre><code class="language-cpp">‚Ä¶
WiFiClient network;
MQTTClient client;

/********* This is where you put your own code *********/

// Variables
int light = LOW;

/**************** End of your own code *****************/

void setup()
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2c2">Step 2:¬† Setup</h4>
<p>In our setup, we need to tell our SSTuino that the pin that we want our light to be an output. We will use Pin 2 in our case as it‚Äôs the first pin with an LED. Use <code>pinMode</code> to set Pin 2 as an output.</p>
<pre><code class="language-cpp">‚Ä¶
void setup()<br>{
  Serial.begin(9600);

  /********* This is where you put your own code *********/

  pinMode(2, OUTPUT);

  /**************** End of your own code *****************/

  connectToWiFi(SECRET_SSID, SECRET_PASS); // Connect to the WiFi network

  // Setup the MQTT client, but not connecting yet
  client.begin(MQTT_URL, MQTT_PORT, network);
  client.onMessage(messageReceived);

  connect(client, &amp;subscribe); // Connect to MQTT server
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2c3">Step 3: Loop</h4>
<p>Inside the loop, we have to respond to changes to the <code>light</code> variable by properly toggling the light on pin 2 on or off. Whenever a message from the subscribed topic comes in, another function will change the <code>light</code> variable, and over here, we need to ‚Äúapply‚Äù this change by actually using the <code>digitalWrite()</code> function.</p>
<pre><code class="language-cpp">‚Ä¶
void loop()
{
  bool connected = client.loop(); // This function must be called on every loop

  // Check if MQTT connection is active, and reconnect if it's broken
  if (connected == false)
  {
    Serial.println("MQTT Client disconnected, reconnecting...");
    connect(client, &amp;subscribe);
  }

  /********* This is where you put your own code *********/

  digitalWrite(2, light);

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2c4">Step 4: Message Received</h4>
<p>Inside this special function is where the MQTT subscribe message is actually received. We have to check if it‚Äôs really the correct message by checking the topic, and then changing the value of <code>light</code> based on the value received.¬†</p>
<p>We do this check by using the <code>topicMatches(shortTopic, longTopic)</code> helper function, which breaks down Ubidot‚Äôs long and hard-to-understand topic format of <code>/v1.6/devices/{DEVICE}/{VARIABLE}/lv</code> into just <code>{DEVICE}/{VARIABLE}</code>.</p>
<p>If the topic is the one we want (i.e. outcome of this function is <code>true</code>), we will change the <code>light</code> variable based on the payload of the message. To do that, we have to convert the payload from a String to an integer. Recall the <a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-5.html">From Blocks to Code lesson</a>, where we converted data from one type to another. To convert a String to int, we just need to use <code>.toInt()</code> behind the String!</p>
<pre><code class="language-cpp">‚Ä¶
void messageReceived(String &amp;topic, String &amp;payload) <br>{
  Serial.println("Incoming data: " + topic + " - " + payload);

  /* 
    All the messages your MQTT service receives can be 
    loaded here
    
    *NOTE*: Do not use this function to publish, subscribe
    or unsubscribe as it may cause deadlocks
  */
  
  /********* This is where you put your own code *********/

  if (topicMatches("sstuino-ii/light", topic) == true)<br>  {
    light = payload.toInt(); // convert the incoming message from String to int
  }

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2c5">Step 5: Subscribe</h4>
<p>At long last, we have come to the last part we have to change: the <code>subscribe()</code> function. This function is responsible for subscribing to the topics that we want to receive messages from.¬†</p>
<p>Simply call the <code>subscribeUbidots()</code> function from the helper by coding <code>subscribeUbidots(client, "sstuino-ii/light");</code> and you‚Äôre done!</p>
<pre><code class="language-cpp">‚Ä¶
void subscribe() {
  /*
    For example, a subscribe is called like:
    subscribeUbidots(client, "sstuino-ii/light");
  */
 
  /********* This is where you put your own code *********/

  subscribeUbidots(client, "sstuino-ii/light");

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<p>All 5 steps are done now, so it‚Äôs time to run your project. Plug in your SSTuino, upload this code, open the Serial Monitor and let it connect. Once it is fully connected, you can try press the switch on your Ubidots dashboard to see the LED on Pin 2 light up!</p>
<pre>Add video here of the user pressing the switch on Ubidots and watching pin 2 light up</pre>
<h2 id="mcetoc_1g04lk9pg2c6">Both at the same time!</h2>
<p>Now that we have both Publish and Subscribe, let's try to do both at the same time. Use the Save As function to make a copy of your "Publish" project and name it "Both". Keep the Subscribe project on one side of your screen so that you can always refer to it.¬†</p>
<h3 id="mcetoc_1g04lk9pg2c7">Arduino Hookup</h3>
<p>This practise will use the exact same circuit as the Publish example.</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/27/arduinoPot40.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-xs.png 300w ,https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-sm.png 480w ,https://knowledge.fourier.industries/media/posts/27/responsive/arduinoPot40-md.png 749w"  alt="" width="1837" height="854"></figure>
<h3 id="mcetoc_1g04lk9pg2c8">Code</h3>
<p>We are going to walk through this tutorial the same way as we did for Subscribe, which is to break it down into 5 steps: <strong>Declaration</strong>, <strong>Setup</strong>, <strong>Loop</strong>, <strong>Message Received</strong> and <strong>Subscribe</strong>.</p>
<p>In addition, as our program is now time-sensitive, we will need to multitask our Arduino! Recall the lesson <a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html">From Blocks to Code Part II</a>, where we talked about how to avoid using <code>delay()</code> and use <code>millis()</code> to check the time since the SSTuino is powered on.</p>
<h4 id="mcetoc_1g04lk9pg2c9">Step 1: Declarations</h4>
<p>Firstly, you want to merge the variables at the top of the code above <code>setup()</code>, having both <code>temp</code> and <code>light</code>¬†for temperature and light switch respectively.</p>
<p>We will introduce 2 completely new variables here, <code>previousMillis</code> which records the last time a delay occured and <code>interval</code>, the number of milliseconds between one delay and the next.¬†</p>
<pre><code class="language-cpp">‚Ä¶
WiFiClient network;
MQTTClient client;

/********* This is where you put your own code *********/

// Variables
int temp = 0;
int light = LOW;

// Variables for multitasking
unsigned long previousMillis = 0;
const long interval = 10000; // 10 seconds interval

/**************** End of your own code *****************/

void setup()
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2ca">Step 2: Setup</h4>
<p>Next, within the <code>setup()</code>¬†function, add another function call to <code>pinMode</code> so that you designate Pin 2 (the same pin that we used in our Subscribe example) as an output pin.¬†</p>
<pre><code class="language-cpp">‚Ä¶
void setup()<br>{
  Serial.begin(9600);

  /********* This is where you put your own code *********/

  pinMode(A0, INPUT);
  pinMode(2, OUTPUT);

  /**************** End of your own code *****************/

  connectToWiFi(SECRET_SSID, SECRET_PASS); // Connect to the WiFi network

  // Setup the MQTT client, but not connecting yet
  client.begin(MQTT_URL, MQTT_PORT, network);
  client.onMessage(messageReceived);

  connect(client, &amp;subscribe); // Connect to MQTT server
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2cb">Step 3: Loop</h4>
<p>Within the <code>loop()</code> function, we will add the fundamental pieces of code that checks if enough time has passed between the last time the delay fired and the current time. If enough time has passed, the temperature is read and sent to the server.¬†</p>
<pre><code class="language-cpp">if (currentMillis - previousMillis &gt;= interval)
{
  previousMillis = currentMillis;
  
  // Do what you need to do here
}</code></pre>
<p>Secondly, we have to periodically set Pin 2‚Äôs signal to be on/off, depending on what the variable <code>light</code>¬†is at the moment. We will do this with a <code>digitalWrite(2, light)</code>. Notice how this is outside the brackets that are responsible for checking if the delay time has passed, which means that it will be called every single time when the loop is run.</p>
<p>Here's the code for the <code>loop()</code> function in full:</p>
<pre><code class="language-cpp">‚Ä¶
void loop()
{
  bool connected = client.loop(); // This function must be called on every loop

  // Check if MQTT connection is active, and reconnect if it's broken
  if (connected == false)
  {
    Serial.println("MQTT Client disconnected, reconnecting...");
    connect(client, &amp;subscribe);
  }

  /********* This is where you put your own code *********/

  unsigned long currentMillis = millis();
  if (currentMillis - previousMillis &gt;= interval)
  {
    previousMillis = currentMillis;
    
    // Read the temperature
    temp = -40 + 0.488155 * (analogRead(A0) - 20);

    // Convert the temperature to a String
    String temperatureString = String(temp);
    publishUbidots(client, "sstuino-ii/temperature", temperatureString);
  }

  digitalWrite(2, light);

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2cc">Step 4: Message Received</h4>
<p>In the <code>messageReceived()</code> function, we have to check for our incoming message just like what we did previously. Copy from the beginning to the end of the if statement and paste it between <code>This is where you put our code</code> markers.</p>
<pre><code class="language-cpp">‚Ä¶
void messageReceived(String &amp;topic, String &amp;payload)
{
  Serial.println("Incoming data: " + topic + " - " + payload);

  /*
    All the messages your MQTT service receives can be
    loaded here

    *NOTE*: Do not use this function to publish, subscribe
    or unsubscribe as it may cause deadlocks
  */

  /********* This is where you put your own code *********/

  if (topicMatches("sstuino-ii/light", topic) == true)
  {
    light = payload.toInt(); // convert the incoming message from String to int
  }

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<h4 id="mcetoc_1g04lk9pg2cd">Step 5: Subscribe</h4>
<p>Finally, don‚Äôt forget to actually subscribe to the topic in question, which should be named <code>sstuino-ii/light</code>, in the <code>subscribe()</code> function.</p>
<pre><code class="language-cpp">‚Ä¶
void subscribe()
{
  /*
    For example, a subscribe is called like:
    subscribeUbidots(client, "sstuino-ii/light");
  */
 
  /********* This is where you put your own code *********/

  subscribeUbidots(client, "sstuino-ii/light");

  /**************** End of your own code *****************/
}
‚Ä¶</code></pre>
<p>With all of the code done, it‚Äôs time to plug in your SSTuino and upload the code. Try playing around with the switch on your dashboard to see if the debug LED on Pin 2 turns on and off.</p>
<pre>Insert video here</pre>
<p>If everything works out, awesome! You have successfully made an IoT controller for a smart home, with a temperature sensor to tell you how hot or cold your room is, and an internet-controlled light that you can trigger using other Internet controlled functions. You can explore how to integrate this with IFTTT (If This Then That) or other smart solutions to link your existing devices like a Google Home Mini with your SSTuino based IoT controller.¬†</p>
<h2 id="mcetoc_1g068rr6ph">In the next lesson...</h2>
<p>In our next two tutorials, we will be building a mobile app with Thunkable, a ‚Äúcode-lite‚Äù mobile app creator. It is <strong>highly recommended</strong> that you watch some of Thunkable‚Äôs tutorials at home, as well as try out the next tutorial (<a href="https://knowledge.fourier.industries/mobile-apps-part-1.html">Mobile Apps, Part 1</a>). All of these videos are bite-sized, 1-2 minute videos so it‚Äôs really quick to get up to speed with how Thunkable works! The next tutorial will only cover a shortened version to get you up to speed.</p>
<p><strong>Essential Tutorials:</strong></p>
<ol>
<li><a href="https://www.youtube.com/watch?v=dQQsvQr-f1U">Introduction to Drag and Drop</a></li>
<li><a href="https://www.youtube.com/watch?v=0NrkKiCGaxk">Build a Translator App with Thunkable</a></li>
<li><a href="https://www.youtube.com/watch?v=TqIVHGYdi54">How Screens and Navigation works in Thunkable</a></li>
<li><a href="https://www.youtube.com/watch?v=3M9F3X1bCnA">Using App Variables</a></li>
<li><a href="https://www.youtube.com/watch?v=3jS3F3IRQB0">Using Functions</a></li>
</ol>
<p><strong>Optional Tutorials:</strong></p>
<ol>
<li><a href="https://www.youtube.com/watch?v=qotZVqzTUpg">Using Logic Blocks</a></li>
<li><a href="https://www.youtube.com/watch?v=FxrXdZPRTLw">Understanding Web (HTTP) APIs in Thunkable</a></li>
</ol>
<p><a href="https://knowledge.fourier.industries/getting-started-with-iot.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/mobile-apps-part-1.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Mobile Apps, Part I</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/mobile-apps-part-1.html"/>
        <id>https://knowledge.fourier.industries/mobile-apps-part-1.html</id>

        <updated>2022-04-16T23:21:26+08:00</updated>
            <summary>
                <![CDATA[
                    In this tutorial, we will create a mobile app with&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In this tutorial, we will create a mobile app with Thunkable and connect your IoT applications with them! Thunkable is an easy to use ‚Äúcode-lite‚Äù mobile app creator, in which you can make mobile apps with only block-based code with no need to write text-based code. You can then upload this to your phone or even publish them on actual app stores if you wish to distribute your app.</p>
<p class="msg msg--info"><strong>Note: </strong>It is strongly recommended that this tutorial be done at home</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1g04lks6i2dn">Signing up to Thunkable</a></li>
<li><a href="#mcetoc_1g04lks6i2do">Hello World!</a></li>
<li><a href="#mcetoc_1g04lks6i2dp">Drag and Drop</a>
<ul>
<li><a href="#mcetoc_1g04lks6i2dq">Adjusting the properties of the label</a></li>
<li><a href="#mcetoc_1g04lks6i2dr">Advanced inputs</a></li>
</ul>
</li>
<li><a href="#mcetoc_1g04lks6i2ds">Activating Buttons</a></li>
<li><a href="#mcetoc_1g04lks6i2dt">Navigating with a tab bar</a></li>
<li><a href="#mcetoc_1g04lks6i2du">Using functions</a></li>
<li><a href="#mcetoc_1g04lks6i2dv">Finishing touches</a></li>
<li><a href="#mcetoc_1g04lks6i2e0">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1g04lks6i2dn">Signing up to Thunkable</h2>
<p>We can sign up for Thunkable with our SST Google Account by clicking ‚ÄúSign up with Google‚Äù. It‚Äôs that simple!</p>
<p class="align-center"><a href="https://x.thunkable.com/signup?referrerId=random.rrr3r7" target="_blank" rel="noopener noreferrer" class="btn">Sign up to Thunkable</a></p>
<p>Once you have completed signup, you can click the links below on your mobile phone to download Thunkable Live so that you can upload the app to your mobile phone:</p>
<figure class="post__image align-center"><a href="https://apps.apple.com/sg/app/thunkable-live/id1223262700" target="_blank" rel="noopener noreferrer"></a><a href="https://apps.apple.com/sg/app/thunkable-live/id1223262700" target="_blank" rel="noopener noreferrer"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/5a902db97f96951c82922874.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/5a902db97f96951c82922874-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/5a902db97f96951c82922874-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/5a902db97f96951c82922874-md.png 749w"  alt="" width="179" height="60"></figure></a><a href="https://apps.apple.com/sg/app/thunkable-live/id1223262700" target="_blank" rel="noopener noreferrer"></a>¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†<a href="https://play.google.com/store/apps/details?id=com.thunkable.live" target="_blank" rel="noopener noreferrer"><figure class="post__image align-center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/en_badge_web_generic-4.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/en_badge_web_generic-4-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/en_badge_web_generic-4-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/en_badge_web_generic-4-md.png 749w"  alt="" width="200" height="59"></figure></a></p>
<p>After signing up, you can start creating your first project. For the category, you can put ‚ÄúJust testing‚Äù.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-1-NewProj-1.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-1-NewProj-1-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-1-NewProj-1-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-1-NewProj-1-md.png 749w"  alt="" width="516" height="359"></figure>
<p>It is highly recommended that you watch some of Thunkable‚Äôs tutorials at the link below, before you start this lesson to have a good idea of how to use Thunkable:¬†</p>
<p class="align-center"><a href="https://docs.thunkable.com/v/drag-and-drop/tutorials" target="_blank" rel="noopener noreferrer" class="btn">Thunkable Drag and Drop Tutorials</a></p>
<h2 id="mcetoc_1g04lks6i2do">Hello World!</h2>
<p>Time to start creating our first Thunkable app! This part of the tutorial will assume that you already understand how to operate the user interface of Thunkable and are familiar with some of the key concepts in Thunkable.¬†</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-2-Layout-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-2-Layout-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-2-Layout-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-2-Layout-1E-md.png 749w"  alt="" width="2124" height="1474"></figure>
<p>Now that you are on your app screen, let‚Äôs get familiar with the interface of Thunkable. On the left, you have the Screens and the Add Components menus.¬†</p>
<p>The Screens menu is for you to add new screens and views to your app. The Add Components menu allows you to easily drag and drop components to your screen.¬†</p>
<p>On the right side, you can change the properties of the individual components on your screen. For instance, you can change the words or colour of a label, or disable a button, and so on.¬†</p>
<p>On the top bar, you can see two tabs: Design and Blocks. Design is the tab you are currently in, and lets you design your app screens. Blocks allow you to create the program behind each screen in your app, using block coding just like what you did previously in TinkerCAD.</p>
<h2 id="mcetoc_1g04lks6i2dp">Drag and Drop</h2>
<p>Let us try dragging and dropping some components into your app! The very first basic, but important component is the Label, which simply displays text on your screen. Drag it directly to the middle of your app.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-1E-md.png 749w"  alt="" width="526" height="491"></figure>
<p>If you want to delete your label, simply press the trash can button on the Screens menu to delete the label. This is the same for other components in your app as well.¬†</p>
<h3 id="mcetoc_1g04lks6i2dq">Adjusting the properties of the label</h3>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-2E-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-2E-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-2E-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-2E-2-md.png 749w"  alt="" width="469" height="451"></figure>
<p>Click on the Label and you can now adjust the properties for that Label on the right side of the screen. You can change the contents, font, how big the words are, and so on. Try changing the label to say <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program" target="_blank" rel="noopener noreferrer">‚ÄúHello World‚Äù</a>!</p>
<h3 id="mcetoc_1g04lks6i2dr">Advanced inputs</h3>
<p>Let‚Äôs try dragging in a <strong>Button</strong> and <strong>Text Input</strong> this time. You can play around with the position and text on the Button and Text Input for now. When you‚Äôre done, change the text on the different components and drag them into the order shown below:</p>
<figure class="post__image post__image--full" ><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-3E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-3E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-3E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-3E-md.png 749w"  alt="" width="2120" height="1472">
<figcaption >Drag the elements on the screen into something like this</figcaption>
</figure>
<h2 id="mcetoc_1g04lks6i2ds">Activating Buttons</h2>
<p>We are going to make a super simple app: replacing the text of the Label with the text inside your Text Input, the moment that the Button is pressed. Click on the Blocks tab on the top bar to switch to blocks editing.</p>
<p>We can click on each of the components on the left bar to see the different functions we can use to change the components (e.g. changing the text on a Label, or reading the text from a Text Input):</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-4.png" data-size="1360x1478"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-4-thumbnail.png" alt="" width="749" height="814"></a>
<figcaption>Text Input</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-5.png" data-size="1271x1480"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-5-thumbnail.png" alt="" width="749" height="872"></a>
<figcaption>Button</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-6.png" data-size="1262x1466"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-6-thumbnail.png" alt="" width="749" height="870"></a>
<figcaption>Label</figcaption>
</figure>
</div></div>
<p>For our simple app, we would need to do 3 things:</p>
<ol>
<li>Detect when the button is clicked</li>
<li>Read the text from the Text Input</li>
<li>Set the contents of the Label to the same contents of the Text Input</li>
</ol>
<p>Starting with the first point, we can click the component for our Button and drag the <a href="#" class="btn btn--yellow">when Button1 Click</a> block into our blocks editor. Everything that goes into this block will be acted upon when you click that button.</p>
<figure class="post__image post__image--full" ><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-7E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-7E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-7E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-7E-md.png 749w"  alt="" width="2112" height="1472">
<figcaption >For completion of point 1, drag the Button Click event block into the editor</figcaption>
</figure>
<p>To complete point 2, we can use a variable to temporarily store the text that was read from the Text Input. Start by clicking the Variables option and dragging the <a href="#" class="btn btn--yellow">set ‚Äòapp‚Äô variable ‚Äòname‚Äô to __</a> block into the editor.</p>
<figure class="post__image post__image--full" ><figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-8E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-8E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-8E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-8E-md.png 749w"  alt="" width="2110" height="1448"></figure>
<figcaption >To complete point 2, drag the variable block in</figcaption>
</figure>
<p>Let‚Äôs give this variable a name like ‚Äútext‚Äù. Keep this name in mind because we will be using it later.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-9-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-9-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-9-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-9-2-md.png 749w"  alt="" width="435" height="114"></figure>
<p>The last part of point 2 will be to actually read the text from the Text Input and store it into this variable.¬†</p>
<p>We can do that by clicking the Text Input component and dragging the ‚ÄúText‚Äù property of the component into the rear part of the statement.</p>
<figure class="post__image post__image--full" ><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-10E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-10E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-10E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-10E-md.png 749w"  alt="" width="2114" height="1454">
<figcaption >Drag the text of Text_Input1 into the rear part of the "set app variable" block</figcaption>
</figure>
<p>Finally, onto point 3: to set the contents of the Label to the ‚Äútext‚Äù variable that we have just set. Click on your Label component on the left and drag the <a href="#" class="btn btn--yellow">set Label1‚Äôs text to ___</a> block into the block editor, and drag the ‚Äúapp variable‚Äù block to the end of the ‚Äúset‚Äù block, so that the code will set the text of your Label to the value of the ‚Äútext‚Äù variable.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-11E.png" data-size="2112x1452"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-11E-thumbnail.png" alt="" width="749" height="515"></a>
<figcaption>Add the "set label text block"...</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-12E.png" data-size="2110x1450"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-3-Drag-12E-thumbnail.png" alt="" width="749" height="515"></a>
<figcaption>...and set the label to the "text" variable</figcaption>
</figure>
</div></div>
<p>Fantastic! You have now completed your basic app that handles text input, a user action through a button, and the display of output. Next up, we are going to extend our app by processing the input text using some of Thunkable‚Äôs built-in functions and adding a tab bar at the bottom.</p>
<figure ><figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-3-Drag-13E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-13E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-13E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-3-Drag-13E-md.png 749w"  alt="" width="2136" height="422"></figure>
<figcaption >Press the Play button to start your app!</figcaption>
</figure>
<h2 id="mcetoc_1g04lks6i2dt">Navigating with a tab bar</h2>
<p>Many of you may have seen apps with a tab bar at the bottom, like Apple‚Äôs Music app, or the Android Clock app. Now we are going to make an app with a tab bar just like that.¬†</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/tab-ios.jpeg" data-size="1170x2532"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/tab-ios-thumbnail.jpeg" alt="" width="749" height="1621"></a></figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/tab-android.jpg" data-size="1080x2412"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/tab-android-thumbnail.jpg" alt="" width="749" height="1673"></a></figure>
</div></div>
<p>We will now extend our app by giving it a Settings page so that we can choose which type of text processing we want our app to do.</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-4-Tab-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-1E-md.png 749w"  alt="" width="1580" height="720"></figure>
<p>Click the + button on the Screens menu and click ‚ÄúBottom Tab Navigator‚Äù to add the tab navigator to our app.</p>
<figure class="post__image post__image--center" ><figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-4-Tab-2E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-2E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-2E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-2E-md.png 749w"  alt="" width="306" height="300"></figure>
<figcaption >Click the trashcan icon to delete all the other screens except Setting</figcaption>
</figure>
<p>Wow, that‚Äôs a lot of buttons! Let‚Äôs delete the ones unnecessary for now. Since we are adding a Settings page, only Settings is relevant to us, so we can delete all of the rest by clicking the trashcan icon as above.</p>
<p>Next, drag our ‚ÄúScreen1‚Äù (which is the first screen that we created) under the Tab Navigators so it looks like this:</p>
<figure class="post__image post__image--center" ><figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-4-Tab-3.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-3-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-3-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-3-md.png 749w"  alt="" width="309" height="300"></figure>
<figcaption >Drag Screen1 to be within the Tab Navigator</figcaption>
</figure>
<p>Click on ‚ÄúScreen1‚Äù, and you might notice that the bottom tab bar has an empty image that we don‚Äôt really want. Let‚Äôs get an icon to make it look better: copy and paste <code>https://img.icons8.com/fluency/48/000000/home.png</code>¬†into the field called ‚ÄúActive Tab Icon‚Äù. Next, we want to rename ‚ÄúScreen1‚Äù to something that makes more sense. Click the Screen1 text and you can change it to Home so it matches the icon.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-4E.png" data-size="1328x1334"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-4E-thumbnail.png" alt="" width="749" height="752"></a>
<figcaption>Change the tab image here...</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-5E.png" data-size="1314x1334"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-5E-thumbnail.png" alt="" width="749" height="760"></a>
<figcaption>...and change the name of Screen1 to "Home"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-6E.png" data-size="2120x1466"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-4-Tab-6E-thumbnail.png" alt="" width="749" height="518"></a>
<figcaption>Don't forget to change the image of the Settings tab!</figcaption>
</figure>
</div></div>
<p>Let us give the Settings page a nicer icon too! Click on the Setting screen on the left and change the link in the ‚ÄúActive Tab Icon‚Äù setting to <code>https://img.icons8.com/fluency/48/000000/settings.png</code>.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-4-Tab-7.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-7-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-7-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-4-Tab-7-md.png 749w"  alt="" width="545" height="142"></figure>
<p>Much better looking now!</p>
<h2 id="mcetoc_1g04lks6i2du">Using functions</h2>
<p>As we have a Settings page now, we can give it some options to turn certain types of text manipulation on and off. Starting with a simple one, we can trim/remove all the spaces to the left and right side of the text we typed in: something like¬†<code> ¬† abcde¬† ¬† </code>¬†will become <code>abcde</code>. There is a built-in function for this, and we can try it out.</p>
<p>But first, we need to add a switch in Settings so that we can turn this feature on and off.</p>
<p>Add a Label and a Switch according to the diagram below, and set the default value of the Switch to ‚Äúfalse‚Äù:</p>
<figure ><figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-5-Func-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-1E-md.png 749w"  alt="" width="1578" height="1460"></figure>
<figcaption >Add a Label and Switch to the Settings page</figcaption>
</figure>
<p>Let‚Äôs switch over to blocks to add our code‚Ä¶We want the value of the Switch to be stored in a variable so that it can be read by our program on the Home tab. Drag the <a href="#" class="btn btn--yellow">when Switch1 on Value Change</a> block into the editor, and set a new variable called <code>removeSpaces</code> to whatever the <code>newValue</code> of the switch is. We are now done with the Settings screen!</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-5-Func-2E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-2E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-2E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-2E-md.png 749w"  alt="" width="2108" height="1448"></figure>
<p><span style="font-weight: 400;">Moving back to the blocks for Home, we can add an <a href="#" class="btn btn--yellow">if</a> block to our button click event so that we check for that setting we just made previously.¬†</span></p>
<p><span style="font-weight: 400;">After that, drag a Logic <a href="#" class="btn btn--green">__=__</a> block to check if the statement is equal to true, and drag a <a href="#" class="btn btn--green">true</a> block to the right-hand side of the equals sign.</span></p>
<p><span style="font-weight: 400;">Finally, drag the <a href="#" class="btn btn--yellow">app variable</a> block from the Variables menu to complete the if statement. Change the variable name to <code>removeSpaces</code> so it matches the name on the other screen.</span></p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-3E.png" data-size="2110x1456"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-3E-thumbnail.png" alt="" width="749" height="517"></a>
<figcaption>Drag in the "if" statement</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-4E.png" data-size="2108x1450"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-4E-thumbnail.png" alt="" width="749" height="515"></a>
<figcaption>Add in the = statement to check for true</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-5E.png" data-size="2110x1456"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-5-Func-5E-thumbnail.png" alt="" width="749" height="517"></a>
<figcaption>Finally add the "app variable" block</figcaption>
</figure>
</div></div>
<p>At this point, we want to reorder our program a bit so it makes more sense. Recalling that the intention of this app is to:</p>
<ol>
<li>Detect when the button is clicked</li>
<li>Read the text from the Text Input</li>
<li><strong>(NEW)</strong> Process the text IF the switch on Settings is on</li>
<li>Set the contents of the Label to the same contents of the Text Input</li>
</ol>
<p>We have inserted a new step between the 2nd and last step, which is to process the text IF the switch is active. As such, the program needs to be organised in the same way and here‚Äôs how:</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-5-Func-6E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-6E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-6E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-6E-md.png 749w"  alt="" width="1420" height="600"></figure>
<p>With these changes done, we can drop in the last piece of code that actually performs the change. In programming, we can actually assign a variable back to itself. For example, if you have a statement in Arduino that says <code>i = i+1;</code>, it is perfectly valid as it adds 1 to <code>i</code>. (Note that this is not valid in maths)</p>
<p>In our case, we can assign the variable called ‚Äútext‚Äù back to itself after we have finished removing the spaces before and after it. We would need to drag 3 types of blocks into the editor: ‚Äúset app variable‚Äù which allows you to set a variable, ‚Äúapp variable‚Äù which gets the contents of a variable, and ‚Äútrim spaces from both sides‚Äù from the Text menu to actually trim the spaces.</p>
<p>Once complete, your code should look something like this:</p>
<figure class="post__image post__image--full"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/28/Thunkable-5-Func-7E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-7E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-7E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/28/responsive/Thunkable-5-Func-7E-md.png 749w"  alt="" width="2672" height="700"></figure>
<p>Leave the ‚Äúelse‚Äù block empty since we don‚Äôt need to change the text when the switch is off.</p>
<h2 id="mcetoc_1g04lks6i2dv">Finishing touches</h2>
<p>We are almost entirely done with our app! For the finishing touches, let‚Äôs change the Border Width to 1 pixel, and Text Alignment to ‚ÄúLeft‚Äù so that we can easily see the differences in the text output.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-6-Finish-1.png" data-size="1366x1340"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-6-Finish-1-thumbnail.png" alt="" width="749" height="735"></a>
<figcaption>Change the border width to 1 so it has a border</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-6-Finish-2.png" data-size="1360x1424"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/28/gallery/Thunkable-6-Finish-2-thumbnail.png" alt="" width="749" height="784"></a>
<figcaption>Change text align to left so spaces are more obvious</figcaption>
</figure>
</div></div>
<p>With that done, your app should look a little bit like this‚Ä¶</p>
<figure class="post__video"><video loading="lazy" width="600" height="300" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/Thunkable-6-Finish-3.mp4" type="video/mp4" /></video></figure>
<h2 id="mcetoc_1g04lks6i2e0">Resources and Going Further</h2>
<p>If you want some beautiful icons to use in your apps, projects and presentations, this is the icon suite that was used in this tutorial:¬†<a href="https://icons8.com/icons/fluency" target="_blank" rel="noopener noreferrer">Icons8 Fluency Icons</a></p>
<p><a href="https://knowledge.fourier.industries/transmit-and-receive.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/mobile-apps-part-2.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Getting Started with IoT</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/getting-started-with-iot.html"/>
        <id>https://knowledge.fourier.industries/getting-started-with-iot.html</id>

        <updated>2022-04-16T16:25:30+08:00</updated>
            <summary>
                <![CDATA[
                    With that done, let‚Äôs upload your code. Open the Serial&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1g04lhe1l27p">What is the Internet of Things (IoT) all about?</a></li>
<li><a href="#mcetoc_1g04lhe1l27q">What is MQTT, and why use it?</a></li>
<li><a href="#mcetoc_1g04lhe1l27r">Creating an Ubidots STEM account</a></li>
<li><a href="#mcetoc_1g04lhe1l27s">How Ubidots works</a></li>
<li><a href="#mcetoc_1g04lhe1l27t">Setting up Ubidots</a>
<ul>
<li><a href="#mcetoc_1g04lhe1l27u">Creating a new Device</a></li>
<li><a href="#mcetoc_1g04lhe1l27v">Creating a new Variable</a></li>
<li><a href="#mcetoc_1g04lhe1l280">Creating a new Dashboard</a></li>
<li><a href="#mcetoc_1g04lhe1l281">Adding a new widget to the dashboard</a></li>
</ul>
</li>
<li><a href="#mcetoc_1g04lhe1l282">Connecting your SSTuino II to Ubidots</a></li>
<li><a href="#mcetoc_1g04lhe1l283">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1g04lhe1l27p">What is the Internet of Things (IoT) all about?</h2>
<p>A lot of people have been talking about the Internet of Things (IoT), and Industry 4.0, but what does all of this mean for you?</p>
<p>¬†</p>
<figure class="post__image post__image--left"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/andres-urena-tsBropDpnwE-unsplash-2.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/andres-urena-tsBropDpnwE-unsplash-2-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/andres-urena-tsBropDpnwE-unsplash-2-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/andres-urena-tsBropDpnwE-unsplash-2-md.jpg 749w"  alt="" width="268" height="206"></figure>Internet of Things, simply put, is the ability for everyday items to connect to the Internet for enhanced functionality. Think of your smart speakers like Alexa, or smart homes that know when you are coming home and automatically prepare the air-con for you.</p>
<p>Internet of Things is a key component of Industry 4.0 and provides companies with the ability to collect and analyse live data from their devices.¬†</p>
<p>¬†</p>
<figure class="post__image post__image--right"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/r151-preview-4.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/r151-preview-4-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/r151-preview-4-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/r151-preview-4-md.jpg 749w"  alt="" width="312" height="209"></figure>For example, newer MRTs that ply Singapore‚Äôs MRT tracks are fitted with sensors to automatically detect faults within the trains and tracks, reducing failure and breakdown, and ensuring better service for all.</p>
<p>With the SSTuino II, you are empowered to create your own IoT devices and innovations. For students, IoT coupled with devices like the SSTuino allows you to collect data about your surroundings and stream them directly to the Internet, giving you the flexibility to conduct scientific inquiry without the need to hold a datalogger there and wait for data to come in. Or, create your own small automations around your household to make life easier! The sky‚Äôs the limit.</p>
<h2 id="mcetoc_1g04lhe1l27q">What is MQTT, and why use it?</h2>
<p>MQTT stands for Message Queuing Telemetry Transport, and it is a ‚Äúlanguage‚Äù that your SSTuino uses to talk to the IoT server, just like how your web browser talks to websites to retrieve them, but spends even less data!</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/MQTT-1024x719.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/MQTT-1024x719-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/MQTT-1024x719-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/MQTT-1024x719-md.jpg 749w"  alt="" width="495" height="348"></figure>
<p>MQTT has 3 important concepts to understand: ‚ÄúPublish‚Äù, ‚ÄúSubscribe‚Äù and ‚Äútopics‚Äù.</p>
<ul>
<li><strong>Topics</strong> are like the address of a website, allowing you to specify a certain device and its resources. For example, you could have a topic that looks like <code>sstuino-ii/temperature</code>, which would mean that you want to access the ‚Äòtemperature‚Äô Variable within the ‚Äòsstuino-ii‚Äô Device.</li>
<li>To <strong>Publish</strong> data means that you are transmitting data from your device to the server, with a given topic. It is a bit like submitting a form on a website.</li>
<li>To <strong>Subscribe</strong> to a topic is to receive data from the server to your device. If you ever subscribed to a YouTube channel and clicked the bell icon, you would be notified whenever the channel posts something new. The same applies here when you subscribe to an MQTT topic and have new data pushed to your device the moment it appears.</li>
</ul>
<p>MQTT is lightweight and fault-tolerant, making it perfect for use with our IoT devices.</p>
<h2 id="mcetoc_1g04lhe1l27r">Creating an Ubidots STEM account</h2>
<p>You will need to create an account with Ubidots for this exercise. Ubidots is an IoT service that provides you with the ability to connect IoT devices, and display beautiful dashboards with data from your devices.</p>
<p>We will be using Ubidots STEM, which is a special educational only version of Ubidots.</p>
<p class="align-center"><a href="https://ubidots.com/stem/" target="_blank" rel="noopener noreferrer" class="btn">Sign up to Ubidots here!</a></p>
<p>Please sign up with Ubidots STEM using your SST email.</p>
<div class="gallery-wrapper gallery-wrapper--full"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-1.png" data-size="2038x1398"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-1-thumbnail.png" alt="" width="749" height="514"></a>
<figcaption>Sign up page</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-2E.png" data-size="2058x1416"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-2E-thumbnail.png" alt="" width="749" height="515"></a>
<figcaption>Click "Take me to Ubidots STEM"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-3.png" data-size="2136x1412"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-2-Signup-3-thumbnail.png" alt="" width="749" height="495"></a>
<figcaption>You should see this when you complete the signup</figcaption>
</figure>
</div></div>
<p>Note that Ubidots STEM has a few limitations that you have to take note of when deploying your IoT devices and applications:</p>
<ul>
<li>Can only be used in <strong>educational</strong> settings</li>
<li>Can only create up to <strong>3 devices</strong>, each device with <strong>10 variables</strong> (sometimes also called channels)</li>
<li>Up to <strong>4,000 data points per day</strong> (2-3 data points per minute) across all devices, so if your device sends data 24/7, please make sure to not exceed this limit</li>
<li>Maximum rate of <strong>1 data point per second</strong>, no faster than that</li>
<li>Up to <strong>3 dashboards</strong>, each with 10 widgets max</li>
<li>For the full list of limitations, please refer to <a href="https://help.ubidots.com/en/articles/639806-what-is-the-difference-between-ubidots-and-ubidots-stem" target="_blank" rel="noopener noreferrer">this link</a>¬†</li>
</ul>
<h2 id="mcetoc_1g04lhe1l27s">How Ubidots works</h2>
<p>Each device that you connect to Ubidots is simply called a ‚ÄúDevice‚Äù, which can have many ‚ÄúVariables‚Äù. These ‚ÄúVariables‚Äù are data sets that you can send. For example, you can have a Variable for temperature, another Variable for distance, and another Variable for a light switch. Within a Variable, there can be ‚ÄúDots‚Äù, which is Ubidot‚Äôs way of describing a single data point at a certain time. If your temperature sensor sends ‚Äú25.6‚Äù to the temperature Variable at 10:30 am, that counts as a single ‚ÄúDot‚Äù.</p>
<p>Ubidots only allows you to send numbers, which means you cannot send texts through their service. To represent a light switch, you would have to send a number of either 1 or 0. If you need to represent a fading light with <code>analogWrite</code>, you may have to use numbers from 0 to 255.</p>
<h2 id="mcetoc_1g04lhe1l27t">Setting up Ubidots</h2>
<p>Please login with the details you used to sign up just now at:</p>
<p class="align-center"><a href="https://stem.ubidots.com/accounts/signin/" target="_blank" rel="noopener noreferrer" class="btn">Ubidots Login</a></p>
<h3 id="mcetoc_1g04lhe1l27u">Creating a new Device</h3>
<p>We are going to create a Device first. Click on the topbar <strong>‚ÄúDevices &gt; Devices‚Äù</strong> to go to the Devices menu.</p>
<div class="gallery-wrapper gallery-wrapper--full"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-1E.png" data-size="2134x1410"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-1E-thumbnail.png" alt="" width="749" height="495"></a>
<figcaption>Go to the Devices menu</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-2E.png" data-size="2116x1414"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-2E-thumbnail.png" alt="" width="749" height="501"></a>
<figcaption>Press the + button</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-3E.png" data-size="2108x1418"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-3E-thumbnail.png" alt="" width="749" height="504"></a>
<figcaption>Select "Blank Device"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-4.png" data-size="2134x1412"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-4-thumbnail.png" alt="" width="749" height="496"></a>
<figcaption>Name the device "SSTuino II"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-5.png" data-size="2136x1408"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-3-Device-5-thumbnail.png" alt="" width="749" height="494"></a>
<figcaption>Done!</figcaption>
</figure>
</div></div>
<p>Create a Device by pressing the + button and selecting ‚ÄúBlank Device‚Äù. Name it something sensible, in our example, we simply name it ‚ÄúSSTuino II‚Äù. Now we have a device created!</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/Ubidots-4-Variable-1E-4.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/Ubidots-4-Variable-1E-4-xs.png 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/Ubidots-4-Variable-1E-4-sm.png 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/Ubidots-4-Variable-1E-4-md.png 749w"  alt="" width="508" height="457"></figure>
<p>Go to your device and you will notice a few key things that you will need to take note of, namely the ‚ÄúAPI Label‚Äù, ID and ‚ÄúToken‚Äù.</p>
<ul>
<li>The <strong>API Label</strong> is the name of your device for a computer to recognise, like your name on Facebook or Instagram</li>
<li>The <strong>ID</strong> is the unique ID that your device will be connecting with, a bit like a <strong>username</strong></li>
<li>The <strong>Token</strong> is the unique <strong>password</strong> of your device</li>
</ul>
<p>Note these details down in your Notes app, because we will be using them later.</p>
<h3 id="mcetoc_1g04lhe1l27v">Creating a new Variable</h3>
<p>Now that you‚Äôre done with creating a Device, it‚Äôs time to create a Variable! Press the big ‚ÄúAdd Variable‚Äù sign in the middle of the screen and name your Variable something sensible. In our case, we are going to be measuring the temperature of the surroundings, so we will name it ‚ÄúTemperature‚Äù.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-4-Variable-2.png" data-size="2100x1472"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-4-Variable-2-thumbnail.png" alt="" width="749" height="525"></a>
<figcaption>This is what you should see after creating the Variable</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-4-Variable-3E.png" data-size="2100x1482"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-4-Variable-3E-thumbnail.png" alt="" width="749" height="529"></a>
<figcaption>Take note of the Variable's "API Label"</figcaption>
</figure>
</div></div>
<p class="msg msg--warning"><strong>Warning</strong>: Do not name your Variables and Device names with anything else, as the example code provided relies on the Device being named "SSTuino II" and Variable as "Temperature"</p>
<p>When you click on the Temperature Variable, you can see the <strong>API Label</strong> of this variable which is <code>temperature</code>. Remember this name, because this is the name of this Variable for computers that need to communicate with it. You can choose to create more Variables here to suit what you need to do.</p>
<h3 id="mcetoc_1g04lhe1l280">Creating a new Dashboard</h3>
<p>With Variables out of the way, let‚Äôs create our first Dashboard. Go to the top bar, <strong>Data &gt; Dashboards</strong> and click ‚ÄúAdd New Dashboard‚Äù. Give it a simple name like ‚ÄúMy Dashboard‚Äù and set the Default Time Range to ‚ÄúLast 1 hour‚Äù so that the dashboard shows data generally from the last hour. Press the green arrow to add the new dashboard.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="1">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-1E.png" data-size="2104x463"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-1E-thumbnail.png" alt="" width="749" height="165"></a>
<figcaption>Click on "Dashboards" under "Data"</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-2E.png" data-size="2128x1468"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-2E-thumbnail.png" alt="" width="749" height="517"></a>
<figcaption>Select "Last 1 hour" to be the Default time range</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-3E.png" data-size="2104x764"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-3E-thumbnail.png" alt="" width="749" height="272"></a>
<figcaption>Add a new widget to your dashboard with the + icon!</figcaption>
</figure>
</div></div>
<h3 id="mcetoc_1g04lhe1l281">Adding a new widget to the dashboard</h3>
<p>With your dashboard, you can add up to 10 widgets to monitor the status of your devices connected to Ubidots. Click ‚ÄúAdd New Widget'' and select ‚ÄúThermometer‚Äù from it. Under the ‚ÄúData‚Äù section, press ‚ÄúAdd Variables‚Äù and select your Variable from the SSTuino II device.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="2">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-4.png" data-size="2108x1474"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-4-thumbnail.png" alt="" width="749" height="524"></a>
<figcaption>Select the Temperature widget</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-5E.png" data-size="2134x1464"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-5E-thumbnail.png" alt="" width="749" height="514"></a>
<figcaption>Click Add Variables</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-6.png" data-size="2132x1468"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-6-thumbnail.png" alt="" width="749" height="516"></a>
<figcaption>Select the "Temperature" Variable</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-7.png" data-size="2106x1482"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Ubidots-5-Dashboard-7-thumbnail.png" alt="" width="749" height="527"></a>
<figcaption>Done!</figcaption>
</figure>
</div></div>
<h2 id="mcetoc_1g04lhe1l282">Connecting your SSTuino II to Ubidots</h2>
<p>Phew, that was a lot of things to go through! Let‚Äôs start to connect your SSTuino II to Ubidots. Go to your Arduino examples and open up the <code>Ubidots_1_Connect</code> example by going to <strong>File &gt; Examples &gt; WiFiNINA &gt; Ubidots_1_Connect</strong>.</p>
<p>Wow, the code looks quite scary! Not to worry, because we have placed comments to let you know where to put code and where to not place any code.</p>
<p>In Arduino programs, you can actually have more than one file! Go to the <code>arduino_secrets.h</code> tab located on the tab bar. Here is where you place all the details of your WiFi network and your Ubidots device info.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/Arduino-1E.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-1E-xs.png 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-1E-sm.png 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-1E-md.png 749w"  alt="" width="430" height="537"></figure>
<p>Remember the 3 things, <strong>API Label</strong>, <strong>ID</strong> and <strong>Token</strong> that you noted down when setting up Ubidots? It‚Äôs time to copy and paste them into your code. Follow the comments given inside the code and paste them in the right places, in between the <code>""</code> quotation marks.</p>
<p>For the Wi-Fi network details, you will need to set up your own Wi-Fi hotspot using your phone, as the SSTuino does not support the higher frequency (5GHz) Wi-Fi networks used by the school.</p>
<p>If you have a newer phone, please enable ‚ÄúMaximise Compatibility‚Äù for iOS and certain Android devices, or ‚ÄúAdvanced &gt; AP Band: 2.4GHz‚Äù for other Android devices.</p>
<div class="gallery-wrapper"><div class="gallery"  data-is-empty="false" data-translation="Add images" data-columns="3">
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/iOS_14_0_1_Personal_Hotspot_settings_maximize_compatibility_highlighted_001-768x592.png" data-size="768x592"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/iOS_14_0_1_Personal_Hotspot_settings_maximize_compatibility_highlighted_001-768x592-thumbnail.png" alt="" width="749" height="577"></a>
<figcaption>iOS</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/Screenshot_20210421-213941-2.png" data-size="1080x1397"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/Screenshot_20210421-213941-2-thumbnail.png" alt="" width="749" height="969"></a>
<figcaption>Android 12</figcaption>
</figure>
<figure class="gallery__item"><a href="https://knowledge.fourier.industries/media/posts/26/gallery/hotspot-switch-to-2.4GHz-ap-band.png" data-size="1494x1080"><img loading="lazy" src="https://knowledge.fourier.industries/media/posts/26/gallery/hotspot-switch-to-2.4GHz-ap-band-thumbnail.png" alt="" width="749" height="541"></a>
<figcaption>Android 11 and Below</figcaption>
</figure>
</div></div>
<p>With that done, let‚Äôs upload your code. Open the Serial Monitor and see if it connects to the Internet with the sentence <code>Connected to MQTT!</code>. If so, congratulations! Your SSTuino has successfully connected to the Internet and Ubidots.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/26/Arduino-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/26/responsive/Arduino-2-md.png 749w"  alt="" width="554" height="261"></figure>
<p>Don't forget to save your code to your Arduino sketchbooks folder as ‚ÄúConnect‚Äù. We will be using this code as our base for the next few lessons.</p>
<p>If your code isn‚Äôt working, check out the list below for some of the common issues:</p>
<ul>
<li><strong>It‚Äôs stuck at ‚ÄúRetrying WiFi Connection‚Äù!</strong>: Double check if your Wi-Fi password and name are correct, and your Wi-Fi network is turned on and discoverable. For iPhones, you have to keep the Personal Hotspot page in settings open for the network to be discoverable.</li>
<li><strong>‚ÄúConnecting to MQTT‚Ä¶‚Ä¶.‚Äù keeps having more dots but never connects</strong>: There is a network issue with your Wi-Fi hotspot. It might be possible that your mobile signal is bad in the classroom. Try using someone else‚Äôs hotspot that is known to be working.</li>
<li><strong>An error code appeared during ‚ÄúConnecting to MQTT‚Äù!</strong>: Check out the ‚ÄúQuick Status/Error Codes Reference‚Äù section at the bottom of the <code>helper.h</code> file tab.</li>
</ul>
<h2 id="mcetoc_1g04lhe1l283">Resources and Going Further</h2>
<p>If you are interested to learn more about the inner workings of MQTT, and how it came about, check out these two excellent articles made by Adafruit.</p>
<ul>
<li><a href="https://learn.adafruit.com/mqtt-adafruit-io-and-you/why-mqtt" target="_blank" rel="noopener noreferrer">Adafruit: Why use MQTT?</a></li>
<li><a href="https://learn.adafruit.com/alltheiot-protocols/mqtt" target="_blank" rel="noopener noreferrer">Adafruit: MQTT Protocol in detail</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-3.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/transmit-and-receive.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Temperature Sensor</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-3.html"/>
        <id>https://knowledge.fourier.industries/programming-the-sstuino-ii-10-3.html</id>

        <updated>2022-04-10T22:47:44+08:00</updated>
            <summary>
                <![CDATA[
                    In this tutorial, we are going to learn about the&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In this tutorial, we are going to learn about the TMP36 Temperature Sensor. Next, we will get started with a simple circuit, and challenge yourselves with a task!</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1fvroan26f">About the Sensor</a></li>
<li><a href="#mcetoc_1fvrp9fai1r">TinkerCAD Example</a>
<ul>
<li><a href="#mcetoc_1fvrp9fai1s">Explanation of Text Code</a></li>
</ul>
</li>
<li><a href="#mcetoc_1fvrr1ms32g">Challenge yourself</a></li>
<li><a href="#mcetoc_1fvrr7cv532">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1fvroan26f">About the Sensor</h2>
<figure class="post__image post__image--left"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/25/arduinoPot22.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot22-xs.png 300w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot22-sm.png 480w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot22-md.png 749w"  alt="" width="162" height="161"></figure>
<p>The TMP36 Temperature Sensor is cheap and simple to use. It is able to measure temperature both below and above 0¬∫ C. It has no mercury as compared to traditional thermometers. Instead, it is a solid-state device that changes the voltage across a diode when the temperature changes.</p>
<p>It generates an analog signal that is proportionate to temperature change, which is very easy to read from a microcontroller like the SSTuino!</p>
<h2 id="mcetoc_1fvrp9fai1r">TinkerCAD Example</h2>
<p>Let's create a new circuit, and set up the TinkerCAD circuit like this:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/25/arduinoPot40.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot40-xs.png 300w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot40-sm.png 480w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot40-md.png 749w"  alt="" width="1837" height="854"></figure>
<p>Next, we will program it in blocks such that it outputs temperature to the serial monitor, with options to calibrate the sensor by adding or subtracting the result.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/25/arduinoPot24.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot24-xs.png 300w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot24-sm.png 480w ,https://knowledge.fourier.industries/media/posts/25/responsive/arduinoPot24-md.png 749w"  alt="" width="543" height="99"></figure>
<p>This is what it looks like when you start the simulation:</p>
<figure class="post__video"><video loading="lazy" width="300" height="150" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/arduinoPot41.mp4" type="video/mp4" /></video></figure>
<h3 id="mcetoc_1fvrp9fai1s">Explanation of Text Code</h3>
<p>Let's download the code from TinkerCAD and open it in the Arduino IDE. Attached below is an "explained" version of the code:</p>
<pre><code class="language-cpp">
int temp = 0; // Setup the variable 'temp' as an integer and starts as 0

void setup()
{
  pinMode(A0, INPUT); //initilise pin A0 as input
  Serial.begin(9600); //initilise serial

}

void loop()
{
  temp = (-40 + 0.488155 * (analogRead(A0) - 20) + 0); //calculations to convert voltage drop measured from A0 into temperature. Adjust 0 to calibrate sensor.
  Serial.println(temp); //print variable 'temp' to serial monitor
}
</code></pre>
<p>Let's try this on the SSTuino!</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<p>Here is what it looks like:</p>
<pre>Insert video here</pre>
<h2 id="mcetoc_1fvrr1ms32g">Challenge yourself</h2>
<p>Using the bar graph example we did in the previous tutorials, how would you set the temperature sensor up such that when it is hotter, more LEDs will light up?</p>
<pre>Insert video here</pre>
<h2 id="mcetoc_1fvrr7cv532">Resources and Going Further</h2>
<ul>
<li><a href="https://learn.adafruit.com/tmp36-temperature-sensor" target="_blank" rel="noopener noreferrer">Adafruit: TMP36 Temperature Sensor</a></li>
<li><a href="https://www.analog.com/media/en/technical-documentation/data-sheets/TMP35_36_37.pdf" target="_blank" rel="noopener noreferrer">Analog Devices: TMP36 datasheet</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/getting-started-with-iot.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>From Blocks to Code, Part II</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html"/>
        <id>https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html</id>

        <updated>2022-04-08T19:40:43+08:00</updated>
            <summary>
                <![CDATA[
                    In this tutorial, we are going to explore functions, understand&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In this tutorial, we are going to explore functions, understand the limitations of block coding, and how to "multitask" your SSTuino.</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1fvmoha0d3">Functions</a>
<ul>
<li><a href="#mcetoc_1fvp2st7fc">Ultrasonic Distance Sensor Example</a></li>
<li><a href="#mcetoc_1fvp2st7fd">Potentiometer Example</a></li>
</ul>
</li>
<li><a href="#mcetoc_1fvp2st7fe">Limitations of Block Code</a></li>
<li><a href="#mcetoc_1fvp2st7ff">"Multitasking" your SSTuino</a>
<ul>
<li><a href="#mcetoc_1fvp2st7fg">millis() instead of delay()</a></li>
<li><a href="#mcetoc_1fvpo53oi1c">Ultrasonic Sensor and Buzzer Example</a></li>
</ul>
</li>
<li><a href="#mcetoc_1fvp2st7fh">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1fvmoha0d3">Functions</h2>
<p>Here are the 3 basic parts that you would have in the code.</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/24/SSTuinoIoT8.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/24/responsive/SSTuinoIoT8-xs.png 300w ,https://knowledge.fourier.industries/media/posts/24/responsive/SSTuinoIoT8-sm.png 480w ,https://knowledge.fourier.industries/media/posts/24/responsive/SSTuinoIoT8-md.png 749w"  alt="" width="897" height="387"></figure>
<p>However, you can separate code into functions, which create modular pieces of code that perform a defined task. Here are some advantages when you standardise code fragments into functions:</p>
<ul>
<li>Functions help the programmer to stay organised and help to conceptualise the program.</li>
<li>Functions codify one function in one place so that it only has to be thought out and debugged once.</li>
<li>If the code has to be changed, functions also reduce the errors in modification.</li>
</ul>
<p>Functions can also help to have smaller code, especially if particular lines of code are used repeatedly in the program. Although functions have many advantages, do take note that Arduino still requires <code><strong>void setup()</strong></code> and <code><strong>void loop()</strong></code> for the program to work. You can place your additional functions outside of them. Now let's make use of previous examples and implement functions!</p>
<h3 id="mcetoc_1fvp2st7fc">Ultrasonic Distance Sensor Example</h3>
<p>We are going to continue to use this circuit from our previous example.</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/24/arduinoPot19.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot19-xs.png 300w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot19-sm.png 480w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot19-md.png 749w"  alt="" width="1758" height="970"></figure>
<p>Here is an edited text version of the blocks code from TinkerCAD. Firstly the device initialises the Serial Monitor. Note that it does not declare the pins inside setup(). We will cover that in the function! üòÅ</p>
<pre><code class="language-cpp">
void setup() 
{
  Serial.begin(9600);
}
</code></pre>
<p>Now we will do up the code in loop(). We make the serial print the time taken for the sound wave to bounce back using the function readUltrasonicDistance(5,6) in microseconds and multiply that by half the speed of sound to display the distance in cm.</p>
<p class="msg msg--info"><strong>Tip: </strong>The speed of sound is 0.0343 centimetre/microsecond. We half that to 0.01723 because the time taken for the sound to bounce back is 2x the total distance (time taken to the object + time taken from the object)</p>
<pre><code class="language-cpp">
void loop()
{
  Serial.println(0.01723 * readUltrasonicDistance(5, 6));
}
</code></pre>
<p>And finally the function! We declare it as long as we can use it in the calculation in loop(). The function essentially tells the sensor to "fire" the ultrasonic wave and read the time taken for it to travel to and fro.</p>
<pre><code class="language-cpp">
long readUltrasonicDistance(int triggerPin, int echoPin)
{
  pinMode(triggerPin, OUTPUT);  // Clear the trigger
  digitalWrite(triggerPin, LOW);
  delayMicroseconds(2);
  // Sets the trigger pin to HIGH state for 10 microseconds
  digitalWrite(triggerPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(triggerPin, LOW);
  pinMode(echoPin, INPUT);
  // Reads the echo pin, and returns the sound wave travel time in microseconds
  return pulseIn(echoPin, HIGH);
}
</code></pre>
<p>Let's try this out in the Arduino IDE! What other functions would you like to add to this code?</p>
<h3 id="mcetoc_1fvp2st7fd">Potentiometer Example</h3>
<p>Let's try out another simple example with the Potentiometer! Set up the circuit as shown:</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/24/arduinoPot4.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot4-xs.png 300w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot4-sm.png 480w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot4-md.png 749w"  alt="" width="1159" height="563"></figure>
<p>Head over to the Arduino IDE and set up the code. First, let's declare the serial port, input and output pins:</p>
<pre><code class="language-cpp">
void setup()
{
    Serial.begin(9600);
    pinMode(A0, INPUT);
    pinMode(6, OUTPUT);
}
</code></pre>
<p>Next, let's leave <code><strong>void loop()</strong></code> alone for a bit üòÜ and set up functions! You can name your functions whatever you want, as long as it is a single word.</p>
<pre><code class="language-cpp">
void pwmLed()
{
    analogWrite(6, (analogRead(A0) / 4));
}

void helloWorld()
{
    Serial.println(Hello, World !);
}
</code></pre>
<p>With this, we have just created 2 functions! Let us place them inside <code><strong>void loop()</strong></code></p>
<pre><code class="language-cpp">
void loop()
{
  helloWorld();
  pwmLed();
}
</code></pre>
<p>The advantage of using functions in this scenario is that if I would like to not make a section of code run, I do not need to comment out all the lines inside <code><strong>void loop()</strong></code>. Instead, I just have to comment out the function as so!</p>
<pre><code class="language-cpp">
void loop()
{
  //helloWorld(); // This code will not be run.
  pwmLed();
}
</code></pre>
<h2 id="mcetoc_1fvp2st7fe">Limitations of Block Code</h2>
<p>Programming with blocks is super simple! Just plop them in and you are good to go! Block coding is a great tool to get people started with little to no programming knowledge. However, as we move to more advanced tutorials like the Internet of Things, block coding would not be able to be used as it is rather limited. While we love introductory tools such as TinkerCAD's block coding functionality, we would like our students to move on to text-based programming languages too!</p>
<p>Here are some limitations of block code:</p>
<ul>
<li>Inability to support external libraries/locked into the platform¬†</li>
<li>Inability to use sensors that are not supported by the platform</li>
<li>Delay based programming, not suitable for time-sensitive applications</li>
</ul>
<h2 id="mcetoc_1fvp2st7ff">"Multitasking" your SSTuino</h2>
<p>Let's make the device "multitask"! For the examples that we have covered so far, we have always used <code><strong>delay()</strong></code> to say light up an LED for 1 second. However, although <code><strong>delay()</strong></code> is handy and works for basic examples, it shouldn't be used in the real world...</p>
<p>Wait, what? ü§Ø</p>
<p>Why shouldn't we use <code><strong>delay()</strong></code>? That is because delay is a blocking function. For example, when you do <code><strong>delay(1000)</strong></code>, the Arduino stops on that line for one second. Blocking functions prevent a program from doing anything else until that particular task has been completed. If you need multiple tasks to occur at the same time, you simply cannot use <strong><code>delay()</code></strong>. If your program requires you to constantly read data (e.g. Ultrasonic Sensor), you should avoid using the delay function.</p>
<h3 id="mcetoc_1fvp2st7fg">millis() instead of delay()</h3>
<p>Here comes <code><strong>millis()</strong></code> to the rescue! ü•≥ When called, it returns the number of milliseconds that have passed since the program first started. By doing some simple math and comparison, you can verify how much time has passed without blocking your code! Let's take a look at a blink sketch that does not use the <code><strong>delay()</strong></code> function:</p>
<pre><code class="language-cpp">
// constants won't change. Used here to set a pin number :
const int ledPin = 13; // the number of the LED pin

// Variables will change :
int ledState = LOW; // ledState used to set the LED

// Generally, you should use "unsigned long" for variables that hold time
// The value will quickly become too large for an int to store
unsigned long previousMillis = 0; // will store last time LED was updated

// constants won't change :
const long interval = 1000; // interval at which to blink (milliseconds)

void setup()
{
    // set the digital pin as output:
    pinMode(ledPin, OUTPUT);
}

void loop()
{
    // here is where you'd put code that needs to be running all the time.

    // check to see if it's time to blink the LED; that is, if the
    // difference between the current time and last time you blinked
    // the LED is bigger than the interval at which you want to
    // blink the LED.
    unsigned long currentMillis = millis();

    if (currentMillis - previousMillis &gt; = interval)
    {
        // save the last time you blinked the LED
        previousMillis = currentMillis;

        // if the LED is off turn it on and vice-versa:
        if (ledState == LOW)
        {
            ledState = HIGH;
        }
        else
        {
            ledState = LOW;
        }

        // set the LED with the ledState of the variable:
        digitalWrite(ledPin, ledState);
    }
}
</code></pre>
<p>How the code works is that it subtracts the previously recorded time (previousMillis) from the current time (currentMillis). If the remainder is greater than the interval (1000 milliseconds), the program updates the previousMillis variable to the current time, and either turn the LED on or off.</p>
<p>As the program is non-blocking, any code that is added outside of the first if statement should work correctly. You can now add other tasks and your LED will blink every second!</p>
<p>Using the <code><strong>millis()</strong></code> function does take a bit more work than using the <code><strong>delay()</strong></code> function but will be worth it if the program needs to multitask.</p>
<h3 id="mcetoc_1fvpo53oi1c">Ultrasonic Sensor and Buzzer Example</h3>
<p>Let's wire up your circuit as so!</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/24/arduinoPot39.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot39-xs.png 300w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot39-sm.png 480w ,https://knowledge.fourier.industries/media/posts/24/responsive/arduinoPot39-md.png 749w"  alt="" width="1834" height="985"></figure>
<p>Next, head over to the Arduino IDE where we will program the ultrasonic sensor to:</p>
<ul>
<li>trigger the ultrasonic wave every 1 millisecond</li>
<li>print the distance to the serial monitor every 1 second</li>
<li>turn on and off a buzzer every second if the distance is less than 30cm</li>
</ul>
<pre><code class="language-cpp">
const int trigPin = 5; // set pin variables
const int echoPin = 6;
const int buzzerPin = 13;

int trigState = LOW;              // state of trigPin
int interval = 1;                 // interval in milliseconds at which trigPin turns on
int interval2 = 1000;             // time in milliseconds at which the distance is printed in serial monitors
int printState = LOW;             // whether or not to print distance
int buzzer = LOW;                 // whether or not buzzer is on
unsigned long previousMillis = 0; // microsecond at which the pin was last writen

void setup()
{
    Serial.begin(9600);       // begin serial communication
    pinMode(trigPin, OUTPUT); // set pinmodes
    pinMode(echoPin, INPUT);
    pinMode(buzzerPin, OUTPUT);
}

void loop()
{
    unsigned long currentMillis = millis(); // time in milliseconds from which the code was started
    if (currentMillis - previousMillis &gt; = interval)
    {                                   // check "blink without delay" code
        previousMillis = currentMillis; //
        if (trigState == LOW)
        {
            trigState = HIGH;
        }
        else
        {
            trigState = LOW;
        }
    }
    // printing speed in serial monitor at an interval of 1s
    if (currentMillis - previousMillis &gt; = interval2)
    { // check "blink without delay" code
        previousMillis = currentMillis;
        if (printState == LOW)
        {
            printState = HIGH;
        }
        else
        {
            printState = LOW;
        }
    }
    digitalWrite(trigPin, trigState);  // Fire the pulse to measure distance
    int duration, distance;            // variables
    duration = pulseIn(echoPin, HIGH); // Measure the time taken for the pulse
    distance = duration * 0.01723;     // Calculate speed
    if (printState = HIGH)
    { // print the data to the serial monitor
        Serial.print(distance);
        Serial.println("cm");
    }

    if (distance &lt; = 30)
    { // If distance &lt;30cm, buzzer will sound at an interval of 1s.
        if (currentMillis - previousMillis &gt; = interval2)
        { // check "blink without delay" code
            previousMillis = currentMillis;
            if (buzzer == LOW)
            {
                buzzer = HIGH;
                digitalWrite(buzzerPin, HIGH);
            }
            else
            {
                buzzer = LOW;
                digitalWrite(buzzerPin, LOW);
            }
        }
    }
    else
    {
        digitalWrite(buzzerPin, LOW);
    }
}
</code></pre>
<h2 id="mcetoc_1fvp2st7fh">Resources and Going Further</h2>
<ul>
<li><a href="https://docs.arduino.cc/learn/programming/functions" target="_blank" rel="noopener noreferrer">Arduino: Using functions in a sketch</a></li>
<li><a href="https://randomnerdtutorials.com/why-you-shouldnt-always-use-the-arduino-delay-function/" target="_blank" rel="noopener noreferrer">Random Nerd Tutorials: Why you shouldn't always use the Arduino delay function</a></li>
<li><a href="https://create.arduino.cc/projecthub/Arduino_Scuola/limitations-of-delay-how-to-do-timers-correctly-833e9e" target="_blank" rel="noopener noreferrer">Arduino Project Hub: Limitations of delay() &amp; how to do timers correctly</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-3.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Light Dependent Resistor</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/programming-the-sstuino-ii-9.html"/>
        <id>https://knowledge.fourier.industries/programming-the-sstuino-ii-9.html</id>

        <updated>2022-04-05T18:56:34+08:00</updated>
            <summary>
                <![CDATA[
                    For this exercise, we will be going to use the&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>For this exercise, we will be going to use the Light Dependent Resistor (LDR) to trigger the RGB LED! We can make use of the LDR to turn on the RGB LED when the environment is dark, and use the potentiometer to control the colour of the LED!</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1fvan9u4ng">About the Component</a></li>
<li><a href="#mcetoc_1fvanutqb1l">Reading LDR value</a>
<ul>
<li><a href="#mcetoc_1fvi5ukvv4e">Calibration of the sensor</a></li>
</ul>
</li>
<li><a href="#mcetoc_1fvao1ho31r">Control RGB LED</a></li>
<li><a href="#mcetoc_1fvi5ukvv4f">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1fvan9u4ng">About the Component</h2>
<figure class="post__image post__image--right"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/22/LDR.jpeg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/22/responsive/LDR-xs.jpeg 300w ,https://knowledge.fourier.industries/media/posts/22/responsive/LDR-sm.jpeg 480w ,https://knowledge.fourier.industries/media/posts/22/responsive/LDR-md.jpeg 749w"  alt="" width="171" height="160"></figure>
<p>The Light Dependent Resistor (LDR/Photoresistor) is a type of resistor that reacts with light. When the amount of light it detects changes, the resistance changes. However, as there are many types of LDRs around, the way they change resistance with the amount of light would be different.</p>
<p>As the LDR reacts to the amount of light it receives, it is very useful as automatic brightness control on your laptops and mobile devices.</p>
<h2 id="mcetoc_1fvanutqb1l">Reading LDR value</h2>
<p>Let's create a new circuit on TinkerCAD like this:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/22/arduinoPot30.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot30-xs.png 300w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot30-sm.png 480w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot30-md.png 749w"  alt="" width="1852" height="984"></figure>
<p>We will read the value from the LDR and output it on the serial monitor:</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/22/arduinoPot14.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot14-xs.png 300w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot14-sm.png 480w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot14-md.png 749w"  alt="" width="447" height="109"></figure>
<p>When running the simulation, open up the serial monitor. The result should look something like this:</p>
<figure class="post__video"><video loading="lazy" width="300" height="150" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/arduinoPot31.mp4" type="video/mp4" /></video></figure>
<p>While I change the light intensity of the LDR, the readings also change.</p>
<h3 id="mcetoc_1fvi5ukvv4e">Calibration of the sensor</h3>
<p>As the sensor has multiple variations, let's check yours out! Construct the circuit on your SSTuino!</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<p>After you are done uploading the code, open the serial monitor. Now note down the value when the room is lit. Afterwards, turn off the lights in the room and note down the value again. We will need this data afterwards to tell when to turn on the RGB LED.</p>
<p class="msg msg--info"><strong>Tip: </strong>If the lights in the room are unable to be turned off, you can use your hands to cover the LDR. Similarly, if your environment is originally dark, you can use the torch from your mobile device to shine at it.</p>
<figure class="post__video"><video loading="lazy" width="300" height="150" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/arduinoPot46.mp4" type="video/mp4" /></video></figure>
<h2 id="mcetoc_1fvao1ho31r">Control RGB LED</h2>
<p>Now let us make the sensor useful! Make it such that the LED will light up when the environment darkens, and you can use the potentiometer to control the colour. To do so, we edit our code to something like this:</p>
<p class="msg msg--info"><strong>Tip:¬†</strong>Use the average of your bright and dark value and input it inside the area (Read analog pin A0 &lt; 512)</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/22/arduinoPot32.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot32-xs.png 300w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot32-sm.png 480w ,https://knowledge.fourier.industries/media/posts/22/responsive/arduinoPot32-md.png 749w"  alt="" width="530" height="374"></figure>
<p>Afterwards, upload the code to the SSTuino. It should look like this:</p>
<figure class="post__video"><video loading="lazy" width="300" height="150" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/arduinoPot47.mp4" type="video/mp4" /></video></figure>
<p class="msg msg--success">Let's share your work! Record and post a video onto Instagram with the hashtag <em><strong>#sstuino</strong></em>!</p>
<p>If you have other ideas on how to control the RGB LED, please try them out and share them with your peers too!</p>
<h2 id="mcetoc_1fvi5ukvv4f">Resources and Going Further</h2>
<ul>
<li><a href="https://learn.adafruit.com/photocells" target="_blank" rel="noopener noreferrer">Adafruit: Photocells</a></li>
<li><a href="https://www.electronics-notes.com/articles/electronic_components/resistors/light-dependent-resistor-ldr.php" target="_blank" rel="noopener noreferrer">Electronics-notes: Light Dependent Resistor</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-8.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Ultrasonic Sensor</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10.html"/>
        <id>https://knowledge.fourier.industries/programming-the-sstuino-ii-10.html</id>

        <updated>2022-04-07T13:00:00+08:00</updated>
            <summary>
                <![CDATA[
                    In this tutorial, we are going to learn about the&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>In this tutorial, we are going to learn about the Ultrasonic Sensor and read its distance using the serial monitor!</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1fvaopr9t49">About the Sensor</a></li>
<li><a href="#mcetoc_1fvap7cft67">Using the Sensor</a></li>
<li><a href="#mcetoc_1fvi60h1c4q">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1fvaopr9t49">About the Sensor</h2>
<figure class="post__image post__image--left"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/23/arduinoPot17.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot17-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot17-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot17-md.jpg 749w"  alt="" width="221" height="159"></figure>
<p>The ultrasonic distance sensor uses ultrasonic waves - a very high-pitched sound that we cannot hear to measure the distance it is from an object.</p>
<p>It is in a <strong>transceiver</strong>¬†configuration, where both the transmitter and receiver are on the same sensor.</p>
<p>One of the uses of the ultrasonic distance sensor is in the automotive industry. They are usually used as reverse warning sensors but are increasingly used in self-driving vehicles.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/23/arduinoPot21.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot21-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot21-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot21-md.jpg 749w"  alt="" width="374" height="273"></figure>
<h2 id="mcetoc_1fvap7cft67">Using the Sensor</h2>
<p>The ultrasonic sensor we are going to use is the HC-SR04, which is commonly used in Arduino circuits:</p>
<figure class="post__image post__image--right"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/23/arduinoPot18.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot18-xs.png 300w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot18-sm.png 480w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot18-md.png 749w"  alt="" width="221" height="129"></figure>
<p class="msg msg--info"><strong>Note:</strong> We are using the 4 pin sensor instead of the 3 pin version, which can be found by typing <strong>ultrasonic sensor </strong>in the component search bar.</p>
<p>Let us go into TinkerCAD and create a new circuit. We are going to assemble it like this:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/23/arduinoPot19.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot19-xs.png 300w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot19-sm.png 480w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot19-md.png 749w"  alt="" width="1758" height="970"></figure>
<p>We are going to program the Arduino such that the ultrasonic distance sensor will output the distance measured into the serial monitor. The code blocks have been extensively simplified by TinkerCAD and it just looks like this:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/23/arduinoPot20.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot20-xs.png 300w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot20-sm.png 480w ,https://knowledge.fourier.industries/media/posts/23/responsive/arduinoPot20-md.png 749w"  alt="" width="1708" height="130"></figure>
<p>This is what you will see when you start the simulation:</p>
<figure class="post__video"><video loading="lazy" width="300" height="150" playsinline="" autoplay="autoplay" muted="" loop="loop" data-mce-fragment="1">
    <source src="media/files/arduinoPot29.mp4" type="video/mp4" /></video></figure>
<p>Let's build this circuit on the SSTuino and try it out! This is what it looks like on the SSTuino:</p>
<pre>Insert video here</pre>
<p class="msg msg--success">Let's share your work! Record and post a video onto Instagram with the hashtag <em><strong>#sstuino</strong></em>!</p>
<h2 id="mcetoc_1fvi60h1c4q">Resources and Going Further</h2>
<ul>
<li><a href="https://learn.adafruit.com/ultrasonic-sonar-distance-sensors" target="_blank" rel="noopener noreferrer">Adafruit: Ultrasonic Sonar Distance Sensors</a></li>
<li><a href="https://www.maxbotix.com/articles/how-ultrasonic-sensors-work.htm" target="_blank" rel="noopener noreferrer">MaxBotix: Understanding How Ultrasonic Sensors Work</a></li>
<li><a href="https://www.murata.com/en-sg/products/sensor/ultrasonic/library/apps" target="_blank" rel="noopener noreferrer">muRata: Ultrasonic Sensors application guide</a></li>
<li><a href="https://www.continental-automotive.com/en-gl/Passenger-Cars/Autonomous-Mobility/Enablers/Ultrasonic-Parking-Sensor" target="_blank" rel="noopener noreferrer">Continental Automotive: Ultrasonic Parking Sensor</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-9.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/programming-the-sstuino-ii-10-2.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Piezo</title>
        <author>
            <name>FourierIndustries LLP</name>
        </author>
        <link href="https://knowledge.fourier.industries/programming-the-sstuino-ii-8.html"/>
        <id>https://knowledge.fourier.industries/programming-the-sstuino-ii-8.html</id>

        <updated>2022-04-01T17:04:48+08:00</updated>
            <summary>
                <![CDATA[
                    Let us play some tunes with the SSTuino! We are&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Let us play some tunes with the SSTuino! We are now going to insert a piezo element into our circuit.</p>
<div class="post__toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#mcetoc_1fvdca6hg25">About the Piezo</a></li>
<li><a href="#mcetoc_1fvdca6hg27">TinkerCAD Exercise</a></li>
<li><a href="#mcetoc_1fvdca6hg28">Pieno</a></li>
<li><a href="#mcetoc_1fvdca6hg29">Enhance the pieno</a></li>
<li><a href="#mcetoc_1fvi5tdb43r">Resources and Going Further</a></li>
</ul>
</div>
<h2 id="mcetoc_1fvdca6hg25">About the Piezo</h2>
<figure class="post__image post__image--left"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/146-2.jpg" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/146-2-xs.jpg 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/146-2-sm.jpg 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/146-2-md.jpg 749w"  alt="" width="101" height="101"></figure>
<p>The Piezo Buzzer provided in the kit uses the piezoelectric effect to produce sound. They are easy to drive (i.e. do not need much energy to generate sound) and are also cheap to produce.</p>
<p>Generally, Piezo Buzzers are sold in two types:</p>
<ul>
<li>A fixed frequency with resonator (will have a fixed pitch when turned on)</li>
<li>A variable frequency without a resonator (pitch can be controlled externally)</li>
</ul>
<p>The buzzer provided in the kit does not come with a resonator so we can change its pitch using the SSTuino.</p>
<h2 id="mcetoc_1fvdca6hg27">TinkerCAD Exercise</h2>
<p>Let's set up the buzzer inside TinkerCAD! Configure your circuit like this:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/arduinoPot8-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot8-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot8-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot8-2-md.png 749w"  alt="" width="1197" height="644"></figure>
<p>I am going to play 3 tones on the harmonic scale. Below is how I programmed it. Can you program it to play up to 1 full scale? <em>(Do, Re, Mi, Fa, So, La, Ti Do!)</em></p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/arduinoPot9.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot9-xs.png 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot9-sm.png 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot9-md.png 749w"  alt="" width="879" height="254"></figure>
<p>Let's create this circuit on the SSTuino! This is what it looks like:</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<pre>Insert video here</pre>
<h2 id="mcetoc_1fvdca6hg28">Pieno</h2>
<p>We are now going to use the potentiometer to control the tone of the speaker. When you turn the knob on the potentiometer, the pitch of the speaker will change. With the same circuit as the previous exercise, we are going to tweak the code for the Pieno.</p>
<p>First, we will need to create a new variable called pot. In this exercise, we are going to use the <strong>map to range </strong>function. The potentiometer has a range from <strong>0 to 1023</strong>, but the speaker has an output range of <strong>35 to 127</strong>. By mapping the range, we can make sure that when the potentiometer is at one end of the input range, the speaker is also at one end of its output range.</p>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/arduinoPot10.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot10-xs.png 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot10-sm.png 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot10-md.png 749w"  alt="" width="494" height="155"></figure>
<p>After you have tried this out, run the simulation and create your own music!</p>
<p>Let's try this on the SSTuino!</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<pre>Insert video here</pre>
<h2 id="mcetoc_1fvdca6hg29">Enhance the pieno</h2>
<p>Would it be possible to add more functions to the <em>pieno</em>? Sure thing! Let us add 2 more buttons to the circuit as shown:</p>
<figure class="post__image"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/arduinoPot11-2.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot11-2-xs.png 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot11-2-sm.png 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot11-2-md.png 749w"  alt="" width="1164" height="635"></figure>
<p>We will add two functions:</p>
<ul>
<li>A button to stop the music (mute button)</li>
<li>A button to make the piezo beep intermittently</li>
</ul>
<figure class="post__image post__image--center"><img loading="lazy"  src="https://knowledge.fourier.industries/media/posts/21/arduinoPot12.png" sizes="(max-width: 749px) 100vw, 749px" srcset="https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot12-xs.png 300w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot12-sm.png 480w ,https://knowledge.fourier.industries/media/posts/21/responsive/arduinoPot12-md.png 749w"  alt="" width="396" height="385"></figure>
<p>This happens when you press start simulation:</p>
<pre>Insert video here</pre>
<p>Let's create this circuit on the SSTuino! This is what it looks like on the SSTuino:</p>
<p class="msg msg--warning"><strong>Warning:</strong> To prevent damage to your Learning Device or your components, please <strong>do not connect the SSTuino to your LD or power supply</strong> when you are wiring up your circuit.¬†</p>
<pre>Insert video here</pre>
<p class="msg msg--success">Let's share your work! Record and post a video onto Instagram with the hashtag <em><strong>#sstuino</strong></em>!</p>
<h2 id="mcetoc_1fvi5tdb43r">Resources and Going Further</h2>
<ul>
<li><a href="https://www.allaboutcircuits.com/technical-articles/how-piezoelectric-speakers-work/" target="_blank" rel="noopener noreferrer">All About Circuits: How Piezoelectric Speakers Work</a></li>
<li><a href="https://learn.adafruit.com/adafruit-arduino-lesson-10-making-sounds/sound" target="_blank" rel="noopener noreferrer">Adafruit: Making Sounds</a></li>
</ul>
<p><a href="https://knowledge.fourier.industries/programming-the-sstuino-ii-7.html" class="btn btn--outline">‚¨ÖÔ∏è Back</a><a style="float: right;" href="https://knowledge.fourier.industries/programming-the-sstuino-ii-9.html" class="btn btn--green">Next ‚û°Ô∏è</a></p>
            ]]>
        </content>
    </entry>
</feed>
